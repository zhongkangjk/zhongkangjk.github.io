<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>懒派日志</title>
  
  
  <link href="https://zhongkangjk.github.io/atom.xml" rel="self"/>
  
  <link href="https://zhongkangjk.github.io/"/>
  <updated>2022-06-08T01:30:14.184Z</updated>
  <id>https://zhongkangjk.github.io/</id>
  
  <author>
    <name>懒派大弟子</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>django-admin只显示用户关联字段的设置</title>
    <link href="https://zhongkangjk.github.io/2022/06/08/django-admin%E5%8F%AA%E6%98%BE%E7%A4%BA%E7%94%A8%E6%88%B7%E5%85%B3%E8%81%94%E5%AD%97%E6%AE%B5%E7%9A%84%E8%AE%BE%E7%BD%AE/"/>
    <id>https://zhongkangjk.github.io/2022/06/08/django-admin%E5%8F%AA%E6%98%BE%E7%A4%BA%E7%94%A8%E6%88%B7%E5%85%B3%E8%81%94%E5%AD%97%E6%AE%B5%E7%9A%84%E8%AE%BE%E7%BD%AE/</id>
    <published>2022-06-08T01:23:15.000Z</published>
    <updated>2022-06-08T01:30:14.184Z</updated>
    
    <content type="html"><![CDATA[<p>需要只让用户查看自己的数据</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> User</span><br><span class="line">关联User字段 = models.ForeignKey(User,on_delete=models.CASCADE,blank=<span class="literal">True</span>,null=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@admin.register(<span class="params">类</span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> 类管理(<span class="params">ImportExportActionModelAdmin</span>):</span></span><br><span class="line">    exclude = (<span class="string">&#x27;关联User字段&#x27;</span>,)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_change_permission</span>(<span class="params">self, request, obj=<span class="literal">None</span></span>):</span></span><br><span class="line">        has_class_permission = <span class="built_in">super</span>(类管理, self).has_change_permission(request, obj)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> has_class_permission:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">if</span> obj <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">and</span> <span class="keyword">not</span> request.user.is_superuser <span class="keyword">and</span> request.user.<span class="built_in">id</span> != obj.关联User字段.<span class="built_in">id</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_queryset</span>(<span class="params">self, request</span>):</span></span><br><span class="line">            <span class="keyword">if</span> request.user.is_superuser:</span><br><span class="line">                <span class="keyword">return</span> 类.objects.<span class="built_in">all</span>()</span><br><span class="line">            <span class="keyword">return</span> 类.objects.<span class="built_in">filter</span>(关联User字段=request.user)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">save_model</span>(<span class="params">self, request, obj, form, change</span>):</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> change:</span><br><span class="line">                obj.关联User字段 = request.user</span><br><span class="line">            obj.save()</span><br></pre></td></tr></table></figure><p>参考：<a href="http://loonlog.com/2020/11/19/django-user-admin-author/">http://loonlog.com/2020/11/19/django-user-admin-author/</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;需要只让用户查看自己的数据&lt;/p&gt;</summary>
    
    
    
    <category term="计算机" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="python" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/python/"/>
    
    
    <category term="django" scheme="https://zhongkangjk.github.io/tags/django/"/>
    
  </entry>
  
  <entry>
    <title>迁移django项目时试水宝塔python管理器中的uwsgi与nginx设置</title>
    <link href="https://zhongkangjk.github.io/2022/05/27/%E8%BF%81%E7%A7%BBdjango%E9%A1%B9%E7%9B%AE%E6%97%B6%E8%AF%95%E6%B0%B4%E5%AE%9D%E5%A1%94python%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%AD%E7%9A%84uwsgi%E4%B8%8Enginx%E8%AE%BE%E7%BD%AE/"/>
    <id>https://zhongkangjk.github.io/2022/05/27/%E8%BF%81%E7%A7%BBdjango%E9%A1%B9%E7%9B%AE%E6%97%B6%E8%AF%95%E6%B0%B4%E5%AE%9D%E5%A1%94python%E7%AE%A1%E7%90%86%E5%99%A8%E4%B8%AD%E7%9A%84uwsgi%E4%B8%8Enginx%E8%AE%BE%E7%BD%AE/</id>
    <published>2022-05-27T14:43:51.000Z</published>
    <updated>2022-05-27T14:49:35.370Z</updated>
    
    <content type="html"><![CDATA[<p>直接上非常刺毛，后来只能复刻一下之前的uwsgi配置</p><span id="more"></span><h3 id="python管理器里的uwsgi配置文件"><a href="#python管理器里的uwsgi配置文件" class="headerlink" title="python管理器里的uwsgi配置文件"></a>python管理器里的uwsgi配置文件</h3><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[uwsgi]</span></span><br><span class="line"><span class="attr">chdir</span>   =项目文件夹绝对路径</span><br><span class="line"><span class="attr">module</span>  =shuai4.wsgi</span><br><span class="line"><span class="attr">home</span>    =项目文件夹绝对路径/**************************_venv</span><br><span class="line"><span class="attr">master</span>  =<span class="literal">true</span></span><br><span class="line"><span class="attr">processes</span>  =<span class="number">4</span></span><br><span class="line"><span class="attr">socket</span>  =<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">9090</span></span><br><span class="line"><span class="attr">chmod-socket</span> = <span class="number">666</span></span><br><span class="line"><span class="attr">vacuum</span> = <span class="literal">true</span></span><br><span class="line"><span class="attr">daemonize</span> =  项目文件夹绝对路径/uwsgi.log</span><br></pre></td></tr></table></figure><h3 id="nginx配置"><a href="#nginx配置" class="headerlink" title="nginx配置"></a>nginx配置</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">listen</span> 暴露给外面的端口;</span><br><span class="line">    <span class="attribute">server_name</span> ip或者域名;</span><br><span class="line">    <span class="attribute">location</span> /static &#123;</span><br><span class="line">      <span class="attribute">alias</span> 项目文件夹绝对路径/collected_static;</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">      <span class="attribute">include</span> uwsgi_params;</span><br><span class="line">      <span class="attribute">uwsgi_pass</span> <span class="number">127.0.0.1:9090</span>; <span class="comment">#须与uwsgi一致</span></span><br><span class="line">      <span class="attribute">client_max_body_size</span> <span class="number">20m</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span>  /www/wwwlogs/ip或者域名.log;</span><br><span class="line">    <span class="attribute">error_log</span>  /www/wwwlogs/ip或者域名.<span class="literal">error</span>.log;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;直接上非常刺毛，后来只能复刻一下之前的uwsgi配置&lt;/p&gt;</summary>
    
    
    
    <category term="计算机" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="django" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/django/"/>
    
    
    <category term="django" scheme="https://zhongkangjk.github.io/tags/django/"/>
    
    <category term="uwsgi" scheme="https://zhongkangjk.github.io/tags/uwsgi/"/>
    
    <category term="nginx" scheme="https://zhongkangjk.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>linux升级sqlite到新的版本</title>
    <link href="https://zhongkangjk.github.io/2022/05/27/linux%E5%8D%87%E7%BA%A7sqlite%E5%88%B0%E6%96%B0%E7%9A%84%E7%89%88%E6%9C%AC/"/>
    <id>https://zhongkangjk.github.io/2022/05/27/linux%E5%8D%87%E7%BA%A7sqlite%E5%88%B0%E6%96%B0%E7%9A%84%E7%89%88%E6%9C%AC/</id>
    <published>2022-05-27T14:27:48.000Z</published>
    <updated>2022-05-27T15:18:12.621Z</updated>
    
    <content type="html"><![CDATA[<p>在迁移django项目过程中遇到不明问题，定睛一瞧竟是sqlite不到3.8</p><span id="more"></span><p>辣鸡yum安装就说最新是3.7  不大行</p><h3 id="先看看现在的版本"><a href="#先看看现在的版本" class="headerlink" title="先看看现在的版本"></a>先看看现在的版本</h3><p><code>sqlite3 --version</code></p><h3 id="打开sqlite官网下载页面"><a href="#打开sqlite官网下载页面" class="headerlink" title="打开sqlite官网下载页面"></a>打开sqlite官网下载页面</h3><p><code>https://www.sqlite.org/download.html</code></p><h3 id="选择这个，复制他的链接"><a href="#选择这个，复制他的链接" class="headerlink" title="选择这个，复制他的链接"></a>选择这个，复制他的链接</h3><p><img src="https://q1.masteryi.top/PicGo/image-20220527223417531.png" class="lazyload" data-srcset="https://q1.masteryi.top/PicGo/image-20220527223417531.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image-20220527223417531"></p><h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget 他的链接</span><br><span class="line">tar -zxvf 那个文件.tar.gz</span><br><span class="line">cd 那个文件</span><br><span class="line">./configure --prefix=/usr/local/sqlite</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="更改旧的sqlite3"><a href="#更改旧的sqlite3" class="headerlink" title="更改旧的sqlite3"></a>更改旧的sqlite3</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /usr/bin/sqlite3 /usr/bin/sqlite3_old</span><br></pre></td></tr></table></figure><h3 id="设置新的sqlite3"><a href="#设置新的sqlite3" class="headerlink" title="设置新的sqlite3"></a>设置新的sqlite3</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mv /usr/local/sqlite/bin/sqlite3 /usr/bin/sqlite3</span><br><span class="line"><span class="meta">#</span><span class="bash">也许可能只要这样</span></span><br><span class="line">ldconfig</span><br></pre></td></tr></table></figure><h3 id="最后再看看版本"><a href="#最后再看看版本" class="headerlink" title="最后再看看版本"></a>最后再看看版本</h3><p><code>sqlite3 --version</code></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;在迁移django项目过程中遇到不明问题，定睛一瞧竟是sqlite不到3.8&lt;/p&gt;</summary>
    
    
    
    <category term="计算机" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="linux" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/linux/"/>
    
    
    <category term="linux" scheme="https://zhongkangjk.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>天下圣贤豪杰</title>
    <link href="https://zhongkangjk.github.io/2022/04/27/%E5%A4%A9%E4%B8%8B%E5%9C%A3%E8%B4%A4%E8%B1%AA%E6%9D%B0/"/>
    <id>https://zhongkangjk.github.io/2022/04/27/%E5%A4%A9%E4%B8%8B%E5%9C%A3%E8%B4%A4%E8%B1%AA%E6%9D%B0/</id>
    <published>2022-04-26T16:37:17.000Z</published>
    <updated>2022-04-26T16:37:47.765Z</updated>
    
    <content type="html"><![CDATA[<p>天下圣贤豪杰</p><span id="more"></span><p>陆芝默不作声，思绪飘远，回到了家乡，想起了很多旧人旧事。</p><p>一座酒铺的墙壁上，曾经悬着一块不曾署名的无事牌，写了那么句：陆芝其实不好看，但是腿长，中意很多年了，怎么也看不够。</p><p>虽然无事牌没有署名，但是字迹明显，大概那位剑修，其实也没想着刻意隐瞒身份。</p><p>有些远远的喜欢，总是忍不住要让人知道，才能甘心。</p><p>只是不等陆芝与那老sè胚计较什么，那位每次喝酒都喜欢端碗蹲在路边的剑修，就在城外战死了。</p><p>除了那块无事牌，剑修其实一辈子也没跟陆芝说过几句话。所以世上再没谁知道，是太喜欢她，还是没那么喜欢。</p><p>剑气长城的最后几年，人人脚步匆匆，说走就走了。</p><p>曾经有个年轻掌柜，蹭着酒，偶尔喝多了酒，反而眼神愈发明亮，眉眼飞扬，说以后等他回了家乡，还要开一家酒铺，卖酒，卖阳春面，也卖火锅和臭豆腐，咱们剑气长城的人去那边，可以破例，可以打折，可以赊账。</p><p>有人问，赊账没啥意思，可不可以不还钱。年轻人笑着说，等你们去喝酒了再说。</p><p>有人再问，沽酒小娘，能不能多雇几个，水灵得能掐出水来。年轻二掌柜笑骂道，天底下没有这样的酒铺，还得掌柜豁了性命不要，才能挣那么点辛苦钱。</p><p>哄然大笑。</p><p>在那尚未成为家乡的异乡，飞升城的那座酒铺还在，只是年轻掌柜不在了，曾经的剑修们也大多不在了。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;天下圣贤豪杰&lt;/p&gt;</summary>
    
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>宁姚来见陈平安</title>
    <link href="https://zhongkangjk.github.io/2022/04/27/%E5%AE%81%E5%A7%9A%E6%9D%A5%E8%A7%81%E9%99%88%E5%B9%B3%E5%AE%89/"/>
    <id>https://zhongkangjk.github.io/2022/04/27/%E5%AE%81%E5%A7%9A%E6%9D%A5%E8%A7%81%E9%99%88%E5%B9%B3%E5%AE%89/</id>
    <published>2022-04-26T16:35:53.000Z</published>
    <updated>2022-04-26T16:36:41.294Z</updated>
    
    <content type="html"><![CDATA[<p>宁姚来见陈平安</p><span id="more"></span>在陈平安翻出屋子后，小米粒赶紧跳下凳子，跑到窗口那边，好像是发现自己个子太矮，只好又折返回桌子，搬了条凳子过去，站在凳子上，伸长脖子，使劲望去。<p>裴钱走到窗口，小米粒轻声问道：“是山主夫人来了吗？”</p><p>裴钱趴在窗台上，笑着点头，“肯定是师娘来了。”</p><p>小米粒在裴钱耳边轻声问道：“那等会儿见着了山主夫人夫人，我要磕几个头才合适啊？一百个够不够？！”</p><p>因为在裴钱第一次游历剑气长城又回家后，那会儿的裴钱个儿还不太高，跟暖树姐姐差不多，每次跟周米粒说起剑气长城那边的事情，裴钱都贼开心，说了好些稀奇古怪的见闻，还有裴钱在那边闯荡江湖的丰功伟绩，还说有个叫郭竹酒的小丫头片子，黝黑黝黑的，比黑炭黑黑炭，而且个子比小米粒还矮一大截，却是个功力极其深厚的马屁精，见着了师娘次次都会磕头。不过那个绰号绿端的小丫头片子，傻是傻了点，说话比陈灵均还不着调，不过其实人还不错，勉强能算是师父的弟子吧……一来二去，小米粒就记住了那个按照辈分算是裴钱师妹的矮子小姑娘，以及那个小姑娘的最喜欢磕头。</p><p>裴钱被小米粒这么一问，就立即知道不妙，若是给师父知道了自己小时候，回到家里是怎么在背后埋汰的郭竹酒，估计要惨兮兮。</p><p>师父的那些小账本，可从来不落笔，只在师父心里，谁都翻不着瞧不见的。</p><p>所以裴钱先告诉小米粒不用磕头，到时候见着了师娘，记得扯开嗓子，多喊几声山主夫人就好，再提醒小米粒，不认得什么郭竹酒。</p><p>小米粒挠挠脸，说道：“我卯足劲喊话，嗓门可大，一不小心就跟打雷似的，吓着了山主夫人咋办？”</p><p>裴钱笑着揉了揉小米粒的脑袋，“师娘很厉害的，不会被你吓到。”</p><p>小米粒想了想，“怎么个厉害啊？”</p><p>裴钱沉默片刻，望向窗外的暮色，给出一个好像答非所问的答案：“没有师娘的话，我就遇不到师父了。”</p><p>小米粒突然伸出手，轻轻拍了拍裴钱的胳膊。</p><p>因为不知道为什么，黑衣小姑娘觉得裴钱这会儿好像有些伤感，不大不小的，就是有那么一丢丢。</p><p>长大以后的裴钱，经常会这样，在落魄山陪着自己和暖树姐姐，不管是在竹楼二楼，在崖畔石桌，还是在山巅栏杆，坐着坐着，聊着聊着，裴钱就会突然不说话了，想着事情，抿起嘴唇，而且会腰杆挺直，好像在看很远很远的地方。</p><p>那些年在山上，偶尔裴钱会高高抬起头，望向很高很高的地方，但是她的心情，好像又在很低很低的地方，小米粒就算想要帮忙，也捡不起搬不动。</p><p>裴钱再也不会卷起袖子，先沿着地上那些青砖，一步一步倒退而走，再往崖外纵身一跃了。也不会再与自己一起大摇大摆走路巡山了。裴钱也不会在树下一个蹦跳，双手抓住树枝上，再让自己抓住她的脚丫一起荡秋千了。很多裴钱以前需要跳起才能抓住的树枝，如今裴钱踮个脚尖，就抓住了。棋墩山上的那个马蜂窝，她们已经很多年没去斗智斗勇满山跑了。</p><p>很多裴钱个儿矮矮时候的有趣事情，就像兜里的瓜子，一磕就没了。</p><p>手臂被小米粒轻轻一拍，裴钱转过头，再微微低下头，笑问道：“咋了？”</p><p>小米粒好像从裴钱袖子上双指捻住了一粒瓜子，往自己嘴里一丢，“小小忧愁，一吃就没。”</p><p>裴钱笑了起来，小米粒也跟着笑起来，起先还有些含蓄，等到见到裴钱开心，小米粒就一下子笑得合不拢嘴。</p><p>裴钱一拍脑袋，快步走向桌子，收起那幅贴有彩笺便签的卷轴，小米粒跳下凳子，趴在桌上，哈哈笑道：“我晓得的，没见过它，么得这回事嘛！”</p><p>裴钱嗑起了瓜子，小米粒趴在桌上，犹豫了很久，突然小声说道：“裴钱，你能不能修行啊？”</p><p>裴钱疑惑道：“问这个做啥锤子？”</p><p>小米粒咧嘴一笑，圆乎乎的下巴搁在手背上，“随便问问。”</p><p>其实她是怕下一次出远门，隔了好些年才回家，害怕裴钱个儿没有长高，却有白头发了。</p><p>裴钱笑道：“我一直有练剑啊，好像……不是特别难。”</p><p>裴钱赶紧补了一句，“这种话，你千万不能跟我师父说，晓不得？”</p><p>小米粒一下子兴高采烈，“知不道！”</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;宁姚来见陈平安&lt;/p&gt;</summary>
    
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>傻狍子</title>
    <link href="https://zhongkangjk.github.io/2022/04/27/%E5%82%BB%E7%8B%8D%E5%AD%90/"/>
    <id>https://zhongkangjk.github.io/2022/04/27/%E5%82%BB%E7%8B%8D%E5%AD%90/</id>
    <published>2022-04-26T16:33:50.000Z</published>
    <updated>2022-04-26T16:34:26.842Z</updated>
    
    <content type="html"><![CDATA[<p>《读者》 2020年9期</p><span id="more"></span><p>“你……狍子是善良的动物。要是人们在野外冻麻了身子，遇上狍子，它会舔醒你，还把皮毛贴在你身上…… 爷爷讲的。”</p><p>祥讲了他爷爷1932年的经历。</p><p>祥的爷爷穿过大旷野，到镇上跑买卖，途中遇见了土匪。</p><p>“胡子搜去了爷爷身上的大洋，还扒走了爷爷身上的羊皮袄，然后把爷爷扔在狂野中，打马而去。</p><p>那是冬天的早晨，爷爷的腿受了枪伤，倒在雪地上渐渐失去了知觉，</p><p>嗒嗒声从狂野深处传来，不久一股暖流荡遍了爷爷的全身。</p><p>一群觅食的狍子救了爷爷……”</p><p>不知不觉中，我把冰车掀落在雪地上，扑嗒声在狂野上回荡。</p><p>“那，咱们应该帮帮那狍子……”</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;《读者》 2020年9期&lt;/p&gt;</summary>
    
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>完美的预设</title>
    <link href="https://zhongkangjk.github.io/2022/04/27/%E5%AE%8C%E7%BE%8E%E7%9A%84%E9%A2%84%E8%AE%BE/"/>
    <id>https://zhongkangjk.github.io/2022/04/27/%E5%AE%8C%E7%BE%8E%E7%9A%84%E9%A2%84%E8%AE%BE/</id>
    <published>2022-04-26T16:32:35.000Z</published>
    <updated>2022-04-26T16:33:14.433Z</updated>
    
    <content type="html"><![CDATA[<p>《读者》 2020年9期</p><span id="more"></span><p>假如你正乘坐航班从法兰克福飞往纽约，那你觉得这班飞机有多长时间是行驶在航线上的呢？正确答案是：从来没有。如果你坐在靠窗的位置，只要扫视一下机翼边缘，便能观察到副翼的躁动——副翼就是用来不断修正航线的。自动驾驶系统每秒钟都会数千次计算飞机实际航线和预设航线间的偏差，然后将校正的指令传导到副翼。</p><p>我常常驾驶一架无自动飞行系统的小飞机消遣时光，此时，进行微小修正任务的便是我的双手。只要我放开操纵杆一秒钟，飞机便会偏移航线。你在开车的时候也会有这样的经验：即便在笔直的高速公路上，双手也不能离开方向盘，否则你将会偏离行驶路线并面临出事的危险。</p><p>生活的运转方式同飞机和汽车的一样，尽管我们更希望让它变成另一种样子：可规划、可预见、无干扰。如果真能如此，那我们只需要专注于预设，专注于理想的起始状态就好。教育、事业、爱情，如果一开始就能做出完美的规划，之后再如预期般完成目标，那该多好。然而正如你所知，生活并非如此。生活这架航班总要不断地经历气流，我们要同所有可能出现的侧风和恶劣天气做斗争。尽管如此，我们表现得却如同一个天真的、期待好天气的飞行员一般。我们高估了预设的作用，低估了修正的作用。</p><p>作为一名业余飞行员，我明白了一点：起飞的状态并不是那么重要，关键是起飞之后的调整。</p><p>美好的生活是一種持续稳定的状态——这是一种常见的认识误区。只有通过后期不断地调整，我们才能让生活变得美好。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;《读者》 2020年9期&lt;/p&gt;</summary>
    
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>django搜索两个模型放在一个分页的函数</title>
    <link href="https://zhongkangjk.github.io/2022/04/27/django%E6%90%9C%E7%B4%A2%E4%B8%A4%E4%B8%AA%E6%A8%A1%E5%9E%8B%E6%94%BE%E5%9C%A8%E4%B8%80%E4%B8%AA%E5%88%86%E9%A1%B5%E7%9A%84%E5%87%BD%E6%95%B0/"/>
    <id>https://zhongkangjk.github.io/2022/04/27/django%E6%90%9C%E7%B4%A2%E4%B8%A4%E4%B8%AA%E6%A8%A1%E5%9E%8B%E6%94%BE%E5%9C%A8%E4%B8%80%E4%B8%AA%E5%88%86%E9%A1%B5%E7%9A%84%E5%87%BD%E6%95%B0/</id>
    <published>2022-04-26T16:30:30.000Z</published>
    <updated>2022-04-26T16:32:09.404Z</updated>
    
    <content type="html"><![CDATA[<p>久远~</p><span id="more"></span><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">company_list</span>(<span class="params">request</span>):</span></span><br><span class="line"></span><br><span class="line">    search = request.GET.get(<span class="string">&#x27;search&#x27;</span>)</span><br><span class="line">    <span class="comment"># 用户搜索逻辑</span></span><br><span class="line">    <span class="keyword">if</span> search:</span><br><span class="line">        公司列表<span class="number">2019</span> = 公司表<span class="number">2019.</span>objects.<span class="built_in">filter</span>(</span><br><span class="line">            Q(名称__icontains=search.strip())</span><br><span class="line">            <span class="comment"># |</span></span><br><span class="line">            <span class="comment">#Q(note__icontains=search.strip())</span></span><br><span class="line">        )</span><br><span class="line">        公司列表<span class="number">2020</span> = 公司表<span class="number">2020.</span>objects.<span class="built_in">filter</span>(</span><br><span class="line">            Q(名称__icontains=search.strip())</span><br><span class="line">            <span class="comment"># |</span></span><br><span class="line">            <span class="comment">#Q(note__icontains=search.strip())</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        company_list = itertools.chain(公司列表<span class="number">2019</span>,公司列表<span class="number">2020</span>)</span><br><span class="line">        company_list = [i <span class="keyword">for</span> i <span class="keyword">in</span> company_list]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment"># querysets = itertools.chain(one_queryset,two_queryset)</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># 将 search 参数重置为空</span></span><br><span class="line">        search = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        company_list = []</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 每页显示  篇文章</span></span><br><span class="line">    paginator = Paginator(company_list, <span class="number">9</span>)</span><br><span class="line"></span><br><span class="line">    page = request.GET.get(<span class="string">&#x27;page&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将导航对象相应的页码内容返回给 articles</span></span><br><span class="line">    companies = paginator.get_page(page)</span><br><span class="line"></span><br><span class="line">    context = &#123; <span class="string">&#x27;companies&#x27;</span>:companies,<span class="string">&#x27;search&#x27;</span>: search&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&#x27;search/list.html&#x27;</span>,context)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;久远~&lt;/p&gt;</summary>
    
    
    
    <category term="计算机" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="python" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/python/"/>
    
    
    <category term="python" scheme="https://zhongkangjk.github.io/tags/python/"/>
    
    <category term="django" scheme="https://zhongkangjk.github.io/tags/django/"/>
    
  </entry>
  
  <entry>
    <title>zip打包解压命令</title>
    <link href="https://zhongkangjk.github.io/2022/04/27/zip%E6%89%93%E5%8C%85%E8%A7%A3%E5%8E%8B%E5%91%BD%E4%BB%A4/"/>
    <id>https://zhongkangjk.github.io/2022/04/27/zip%E6%89%93%E5%8C%85%E8%A7%A3%E5%8E%8B%E5%91%BD%E4%BB%A4/</id>
    <published>2022-04-26T16:21:09.000Z</published>
    <updated>2022-04-26T16:22:39.453Z</updated>
    
    <content type="html"><![CDATA[<p>zip命令</p><span id="more"></span><p>zip 命令为打包压缩命令，一般为了跟 windows 交互才会用的，不涉及 windows 推荐使用tar配合 gzip,bzip2,xz</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">常用命令选项</span></span><br><span class="line">-d       从压缩文件内删除指定的文件。</span><br><span class="line">-m       把文件移到压缩文件中。</span><br><span class="line">-0-9     压缩比</span><br><span class="line">-r       递归处理，所有文件和子目录一并处理。</span><br><span class="line">-x&lt;范本样式&gt;       压缩时排除符合条件的文件。</span><br><span class="line">-c       交互为每一个文件设置注释</span><br><span class="line">-z       交互多行注释,英文句话.来表示结束</span><br><span class="line">-e       交互设置密码</span><br><span class="line">-P       直接设置密码</span><br><span class="line">zip test.zip test.txt       #添加压缩文件</span><br><span class="line">zip test.zip test1.txt      #移动文件到压缩包</span><br><span class="line">zip -d test.zip test.txt    #删除test.txt</span><br><span class="line"></span><br><span class="line">zip -r test.zip ./*         #压缩当前全部文件到test.zip</span><br><span class="line">zip test2.zip test2/*       #打包目录</span><br><span class="line">zip test3.zip tests/* -x tests/ln.log      #压缩目录,除了tests/ln.log</span><br><span class="line"></span><br><span class="line">zip -r test.zip ./* -P 123      #设置密码(明文设置密码不太安全)</span><br><span class="line">zip -r test.zip ./* -e           #交互设置密码(安全)</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">设置压缩比</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-0不压缩，-9最高压缩，默认为-6</span></span><br><span class="line">zip test.zip test.txt -6</span><br></pre></td></tr></table></figure><p>unzip</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">-d     指定目录</span><br><span class="line">-n     解压时不覆盖</span><br><span class="line">-o     不询问直接覆盖</span><br><span class="line">-l     显示压缩文件内所包含的文件。</span><br><span class="line">-v     显示压缩文件内所包含的文件。</span><br><span class="line">-x     指定不要处理哪些文件。</span><br><span class="line"></span><br><span class="line">-P      解压缩密码</span><br><span class="line"><span class="meta">#</span><span class="bash">解压到当前目录并直接覆盖</span></span><br><span class="line">unzip -o test1.zip</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">指定解压目录</span></span><br><span class="line">unzip test1.zip -d /tmp/</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">解压特定文件</span></span><br><span class="line">unzip test1.zip inc abc</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">查看zip包里所有文件</span></span><br><span class="line">unzip -l test.zip</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">只查看zip包里第1级文件或目录</span></span><br><span class="line">unzip -l test.zip -x &#x27;*/*/*&#x27;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;zip命令&lt;/p&gt;</summary>
    
    
    
    <category term="计算机" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="linux" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/linux/"/>
    
    
    <category term="linux" scheme="https://zhongkangjk.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>出两剑</title>
    <link href="https://zhongkangjk.github.io/2022/04/27/%E5%87%BA%E4%B8%A4%E5%89%91/"/>
    <id>https://zhongkangjk.github.io/2022/04/27/%E5%87%BA%E4%B8%A4%E5%89%91/</id>
    <published>2022-04-26T16:17:22.000Z</published>
    <updated>2022-04-26T16:18:26.991Z</updated>
    
    <content type="html"><![CDATA[<p>出两剑</p><span id="more"></span><p>陈平安看了眼袖珍明月，笑了笑，收入袖中。</p><p>以后送给自己的开山大弟子，就当是作为五境破六境的礼物好了。</p><p>如果已经跻身六境又破七境，那么弟子可就有点为难师父了啊。</p><p>那把曹子匕首在陈平安指尖、手背翻转如飞。</p><p>陈平安突然一个急停，收起短刀，双手撑在城头上，仰头喃喃自语。</p><p>所幸平安，复见天曰，其余何辜，独先朝露。</p><p>阿良昔年从青冥天下重返剑气长城的那次重逢于异乡。</p><p>两人一起饮酒，阿良曾经说，陈平安，其实真的可惜。</p><p>你没有见过三教论辩，尚未开口说话就好像已经赢了的老秀才，没有亲眼见到那个意气风发，神采飞扬的文圣。</p><p>你没有见过那个只是双鬓微微霜白、容貌还不算太苍老的先生。</p><p>你没有见过彩云之上，白衣胜雪拈黑子的年轻崔瀺。</p><p>你没有见过犯错之后，永远高高扬起头的少年左右。</p><p>你没有见过读书之时，喜欢微微皱眉头的年少小齐。</p><p>你没有见过伸出双手，按住两颗脑袋不让两个师兄弟气呼呼打架的刘十六，咧嘴憨笑，然后在先生的眼神示意下，稍微松开一颗脑袋的大手，让年纪更小的师弟小齐，能够轻轻踹上不讲道理的左师兄一脚。最后先生就当起了捣浆糊的和事佬，说可以了可以了。小齐双臂环胸，眉眼飞扬，与传道授业时的先生有很多神似，身材修长的大师兄崔瀺，会双手搭住师弟左右的肩头，下巴轻轻搁在恼火少年的脑袋上，说算啦算啦，你是师兄，让着点小师弟。小齐就会得了便宜还卖乖，笑着朝那左师兄摇头晃脑，说我需要他让？！当左右狠狠瞪眼，小师弟就立即跑到大个子师兄身后，可当大师兄一放开左师兄的肩膀，小齐觉得不妙，就立即躲去先生身后，先生便张开双手，护着那个小弟子在身后，左一步，右一脚，拦着身前那个依依不饶的的二弟子，那个名为左右的少年郎。</p><p>对啊。</p><p>陈平安都未见过。</p><p>当时陈平安笑着喝酒，痛饮一碗酒水，说我只是听你说过，听说了也只能想象，可只是听说只是想象，我就很高兴。</p><p>阿良见着那些好像从一个年轻人笑容中、一只空白酒碗里跑出来的伤感。</p><p>伤感总是这么顽劣，眼睛都藏不好，酒水也留不住。</p><p>于是最后阿良跟着喝完最后一碗酒，既是感慨又是安慰，说那次离开剑气长城，我好像就已经老了，然后有天，一个黝黑消瘦的草鞋少年，身边带着个红棉袄小姑娘，一起向我走来。</p><p>此时此刻的城头上，陈平安也想要往家乡走去，与很多人走去，归乡路远，一路上哪怕见到了再多的陌生人，也要认真看遍啊。</p><p>陈平安双手抱着后脑勺，挺直腰杆，一直望向远方。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;出两剑&lt;/p&gt;</summary>
    
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>谜语</title>
    <link href="https://zhongkangjk.github.io/2022/04/27/%E8%B0%9C%E8%AF%AD/"/>
    <id>https://zhongkangjk.github.io/2022/04/27/%E8%B0%9C%E8%AF%AD/</id>
    <published>2022-04-26T16:12:05.000Z</published>
    <updated>2022-04-26T16:16:08.300Z</updated>
    
    <content type="html"><![CDATA[<p>谜语</p><span id="more"></span><p>老秀才说道：皇帝爱长子，百姓爱幺儿，我当先生的，难免会偏心关门弟子些，君倩你莫要多想，毕竟陈平安与你们几个不一样，他在先生身边时日最少，靠自己最多，又年纪最小，还太年轻……</p><p>说到这里。</p><p>老秀才止住话头，因为老人突然发现哪怕是自己的关门弟子，原来，原来竟然也不年轻了。</p><p>昔年那个眼神澄澈、都还不会喝酒、穿着草鞋走过千山万水的少年郎，竟然都过了而立十年，开始往不惑之年而去了。</p><p>老秀才叹息一声，一跺脚，身形消散。</p><p>刘羡阳便递出一捧瓜子，刘十六坐回台阶，摇摇头。</p><p>刘羡阳主动说了些话，刘十六要么点头，要么言简意赅几个字，最后两个初次相逢的“本家”，就开始沉默，各自想着心事，只是都不觉如此便尴尬。</p><p>最后刘十六问道：“先前你打盹，看你剑意迹象，流转形骸，是在梦中练剑？”</p><p>刘羡阳点点头，随口道：“有部祖传剑经，练剑的法子比较古怪，只可惜不适合陈平安。”</p><p>刘十六说道：“我与白也是朋友，他剑术不错，以后你要是在修行路上，遇到了比较大的剑道</p><p>瓶颈，可以去找他切磋，白也虽然性子冷清，其实是热心肠，遇见你这样的晚辈，定会刮目相看。”</p><p>刘羡阳转过头，笑嘻嘻抱拳道：“好嘞，哪怕修行瓶颈不是那么大，只要白先生愿意教，晚辈便愿意学！”</p><p>刘十六点点头，年轻人不是个心眼小的，心大。半点不会觉得自己是在居高临下的施舍，这就很好。</p><p>难怪能与小师弟是朋友。</p><p>就像自己与白也？</p><p>刘十六站起身，与刘羡阳告辞，他本就是个不喜欢说话的，尤其是客气话。</p><p>刘十六请那魏山君帮着隐匿行踪，重返落魄山。</p><p>打算在这儿多留些时日，等那天幕再度开门，他好待客。</p><p>在落魄山上待久了，与魏檗，还有那来自剑气长城的米裕关系也就熟了。</p><p>刘十六与米剑仙打听了些小师弟的隐官事迹。</p><p>大为欣慰。</p><p>刘十六如今对落魄山，已经比较知根知底。</p><p>虽然小师弟经常远游，在家乡不多，在异乡更久。</p><p>但是依旧攒下了一份偌大家底，确实不易。</p><p>如今落魄山的家底，除了与披云山魏山君的香火情，光是靠着牛角山渡口的生意抽成，就进账不小。</p><p>可惜刘十六没能见着那个绰号老厨子的朱敛。</p><p>而且先生说小师弟的开山大弟子，那个裴钱，迟早会让整座天下大吃一惊，故而刘十六颇为好奇。</p><p>化名余米的剑仙米裕，尚未在霁sè峰祖师堂敬香，但是在宝瓶洲，一位来自剑气长城的玉璞境剑修，其实分量半点不轻。</p><p>只不过这位剑修，也确实太惫懒了些。</p><p>据说通过那条自家的翻墨渡船，让人购买了许多用来观看镜花水月的山上器物，白碗，画卷，砚台，尺牍字帖等等，给米裕搜罗了二十多件，花钱如流水，周米粒跟刘十六说起这一茬的时候，小姑娘都要替余米心疼不已，说这架势，不是摆明了奔着打光棍去的吗？</p><p>看守大门的郑大风，纯粹武夫出身，去了第五座天下。</p><p>岑鸳机，是落魄山的祖师堂谱牒出身，同时又是那朱敛的不记名弟子，小姑娘练拳挺心诚，每天都在那条山顶山脚路上，来回走桩。</p><p>刘十六看在眼里，打算找个机会，合乎山上规矩地指点她几句拳法拳理。</p><p>元宝元来，姐弟二人，是那卢白象的嫡传弟子，听说刚刚离开落魄山没多久。所以如今的落魄山上，就更加冷清了。</p><p>拜剑台，金丹境瓶颈崔嵬，蒋去成了练气士，而且走得符箓一道。</p><p>云游至此的北俱芦洲老真人桓云，专门为了蒋去，曾在落魄山逗留一年之久，为蒋去传授符箓术。</p><p>因为蒋去暂时并非落魄山祖师堂嫡传，传道一事，忌讳不多，双方没有师徒之名，却有师徒之实。</p><p>另外那个同龄人张嘉贞，由于没有修行资质，并未灰心丧气，而是选择跟随那位从不抛头露面的大账房先生，来自倒悬山春幡斋的韦文龙，学习钱财精算之术。</p><p>骑龙巷压岁铺子，女鬼石柔，却身披一位飞升境大修士的遗蜕。</p><p>至于那位长命道友，更是。</p><p>草头铺子，目盲道人贾晟，赵登高，田酒儿，师徒三人，那个酒儿小姑娘，鲜血是天生的“符泉”。亏得是入了落魄山，不然下场不会太好，很容易成为仙家山头的一棵摇钱树。</p><p>从落魄山迁徙去往灰蒙山修行的一条黑蛇，棋墩山出身，如今是龙门境。幻化人形之后是那黑衣青年，脸sè惨白，身披法袍“鸦青”，是一件蛇蜕炼化而成。化名云子，真名“德章”。</p><p>关于相当于半条命的“真名”一事，听小米粒说，是那只大白鹅的“旨意”，云子不敢不从。</p><p>好在赐名之外，那个崔东山还赐下一件适宜蛟龙之属修炼的仙家重宝。</p><p>作为修行不易的山精-水怪之属，云子之所以破境如此之快，与本身资质有关系，却不大，还是得归功于陈灵均赠送的蛇胆石。</p><p>至于黄湖山那条深藏不露的大蟒，早已是金丹境瓶颈，只是大蟒自己始终不愿走江。</p><p>大山君魏檗为刘十六泄露过天机，它原本有望与某条“小泥鳅”，争一争五行之水的大道机缘，遗憾落败，最终未能离开骊珠洞天。</p><p>那大蟒的修行资质自然不差。早已经能够幻化人形。但是极少露面，偶尔现世，都以真身露面，喜好蛰伏在大湖水底，默默开辟一座水族洞府。</p><p>曾经用金精铜钱买下山头的黄湖山旧主，因为大蟒从未以人身上岸，所以只知道自家湖底盘踞着一条湖泽水怪，但是既不清楚它的境界高低，更不清楚这么一桩涉及骊珠洞天气运流转的天大道缘，不然绝不会将黄湖山半卖半送给落魄山。</p><p>大蟒如今化名黄衫女，本命真名，一样是崔东山赠予，在谱牒上为“佛松”。她只会偶然离水上岸，现身见一见那个周米粒。</p><p>周米粒还是不敢独自下山，就靠着一袋袋瓜子与魏山君做买卖，每隔一月就把她丢到黄湖山水边。</p><p>黄衫女，有那碧瞳如水涵清秋，她上岸后，浑身上下，弥漫着一股若隐若现的天然苍茫水云气。</p><p>湖水之畔有一老松，亦是暗藏玄奇，气象内敛，暂未引发山水异动。</p><p>好一个伏蟒千年无动意，老松何日不参禅。</p><p>与天生气势凌人的云子，截然不同，真身为蟒的黄衫女却喜静不喜动。后者巢穴地界名为青泥坡，位于灰蒙山，大有“雾毒飞鸢堕，风腥巨蟒过”的意思。</p><p>白衣少年曾经带着那条骑龙巷左护法，一起游历黄湖山，临水之时，笑着说文豪曾有诗篇《说剑》，“留斩泓下蛟，莫试街中狗”。</p><p>听得湖底大蟒潜藏水底，真身头颅低垂贴泥，至于白衣少年身后的那条土狗，更是瑟瑟发抖，趴地不起。</p><p>藩属黄庭国在内，以及红烛镇、棋墩山在内的旧神水国，历史上都曾是古蜀地界，相传蛟鼍窟连绵不绝，惹来剑仙出没云水间，剑光直下，斩杀蛟龙。</p><p>只不过刘十六没打算去见那云子和黄衫女，不打搅他们的修行，准确说来是不扰乱他们的道心。</p><p>毕竟天下水裔，见着了他刘十六，其实都不是什么好事。</p><p>唯独那个每天扛着金扁担和绿竹杖、早晚巡山不嫌累的小米粒，哪怕每天与刘十六相处，竟是半点事儿都没有的。</p><p>一来是这“哑巴湖大水怪”境界太低，再者周米粒道心清浅澄澈，反而无事。</p><p>此外还有些落魄山祖师堂人物，也都不在山上。</p><p>刘十六熟悉了落魄山之后，才发现好像从年轻山主到学生弟子，再到祖师堂嫡传，以及供奉，</p><p>好像多在远游。</p><p>风气很怪。</p><p>寻常山头，不会如此。</p><p>武夫，剑修，儒生，道门练气士，各sè山泽精怪，女鬼。</p><p>还要加上那位根脚特殊的长命道友。</p><p>却相处融洽。</p><p>也怪。</p><p>今天周米粒拉着大个子坐在山巅，陪她一起看那憨憨的岑姐姐练拳下山，身形越来越米粒小，让小米粒高兴得双手挡在嘴边，笑哈哈。</p><p>周米粒笑过之后，都没裴钱提醒她要淑女些，就有些伤心，于是打算说些开心的话语，转过头，与刘十六轻声问道：“半个山主师兄，咱们来猜谜语吧？我可是知道好大一箩筐的谜语，莫说是暖树姐姐，就连裴钱都比不过我，她次次想不出答案，就只能着急得原地团团转嘞。”</p><p>刘十六笑道：“你问。”</p><p>周米粒咳嗽一声，“天上有面鼓，藏在云深处。一敲轰隆隆，再敲轰轰隆。是啥个事情，知不道？”</p><p>刘十六说道：“打雷。”</p><p>刘十六瞥了眼天幕，先前被他打落金身的远古神灵，并非出身雷部，不过说不定下一位，就是了。</p><p>周米粒竖起大拇指，然后小姑娘开始沉思。</p><p>哦豁，遇到高手了。</p><p>原本还打算提醒大个子一句的小米粒，又问道：“山上有株草，珍珠可不少。我去没拿来，你去也白跑……”</p><p>刘十六笑道：“是露珠吧。”</p><p>书上有那譬如朝露，去日苦多。</p><p>犹有那所幸平安，复见天日，其余何辜，独先朝露。</p><p>周米粒双手环胸，皱起眉头，想了个比较有难度的谜语，“棋子多又多，棋盘大又大。咱们只能看，偏偏不能下。我问你，那么棋子是个啥？”</p><p>刘十六笑着摇头。</p><p>他曾独自远游天外，亲眼所见礼圣法相，捻起那些“棋子”，拦阻那些远古存在。</p><p>周米粒晃着脑袋，笑眯眯道：“可难可难吧，不知道没关系，只要到晚上一抬头，你就知道答案哩。”</p><p>然后小姑娘看那大个子，似乎有些神色落寞，她便说了句小石碑，一块块块，竖在门口分两排。她微微张开嘴，嘿嘿笑着。</p><p>刘十六笑着揉了揉小姑娘的脑袋：“知道了。”</p><p>“个儿高，离天近，真羡慕。”</p><p>小米粒托着腮帮，眺望远方，忧伤小小的，却是真忧愁，“半个山主师兄，我跟你说个秘密啊，我其实也不是那么喜欢巡山，可是我每天在山上，光嗑瓜子没事做，帮不上啥忙。你说愁不愁人？所以每次巡山我都跑得飞快飞快，是我在偷偷的偷懒哩。”</p><p>刘十六点点头，“我会帮你保密的。”</p><p>周米粒凑近些，小声说道：“那我跟你说个天大的秘密，我跟好人山主，当年在北俱芦洲那儿一起走江湖的时候……”</p><p>小姑娘将绿竹杖和金扁担都先放在脚边，然后站起身，这才说道：“我就站在一个大背篓里边，可劲儿敲裴钱师父的脑袋。陈好人说一颗雪花钱一颗板栗，我眼睛都没眨一下。”</p><p>刘十六笑道：“那你真是很厉害了。”</p><p>原本神采飞扬的周米粒，一下子神色黯然，“那些谜语，都是他教我的。他再不回家，我都要忘记了。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;谜语&lt;/p&gt;</summary>
    
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>消逝的Timeline</title>
    <link href="https://zhongkangjk.github.io/2022/04/27/%E6%B6%88%E9%80%9D%E7%9A%84Timeline/"/>
    <id>https://zhongkangjk.github.io/2022/04/27/%E6%B6%88%E9%80%9D%E7%9A%84Timeline/</id>
    <published>2022-04-26T16:05:19.000Z</published>
    <updated>2022-04-26T16:11:40.719Z</updated>
    
    <content type="html"><![CDATA[<p>之前博客的Timeline</p><span id="more"></span><p><strong>2021-01-28 @Master易</strong> 周中坐班 易疲敝 ，咕子老公如是说，账记+1</p><p><strong>2021-01-17 @Master易</strong> 抱残守缺，故步自封</p><p><strong>2021-01-13 @Master易</strong> 今日比达尔已清账</p><p><strong>2021-01-12 @无名之辈</strong> 明日要恰饭了，老公记账+2，明日付款后销账</p><p><strong>2021-01-01 @无名之辈</strong> 晚上还没有明日安排，臀k记账+2</p><p><strong>2020-12-24 @Master易</strong> 老公开始安排首胜，于是自己不出现，于是记账+1！</p><p><strong>2020-12-20 @Master易</strong> 盛世长安花</p><p><strong>2020-12-08 @Master易</strong> 今天老公居然声称眼累，又是咕咕，记账+1</p><p><strong>2020-12-07 @Master易</strong> 宽敞，放个屁都不用开窗通风</p><p><strong>2020-12-07 @Master易</strong> 老公刚开始上班就遇上年终奖，必须记账+1</p><p><strong>2020-12-07 @Master易</strong> 打不过就跑，谁追他，谁吃屁</p><p><strong>2020-12-06 @Master易</strong> 今日の首胜仍旧是失去了老公の声音，账上+1</p><p><strong>2020-12-05 @Master易</strong> 今日试图首胜，而老公发出咕咕咕咕の声音，可记+1</p><p><strong>2020-12-03 @无名之辈</strong> bbk上班繁忙，无时间被请饭，自愿提出反向记账，遂给bbk记账+1</p><p><strong>2020-12-03 @Master易</strong> 今天太阳的对面是月亮，一起出来了</p><p><strong>2020-11-28 @Master易</strong> 老公说那个什么套路千层面特别好吃，要请我和比达尔吃，先记账+1</p><p><strong>2020-11-27 @Master易</strong> 老公悄悄开局，竟已首胜，岂不记哉？+1也</p><p><strong>2020-11-26 @Master易</strong> 老公说好已经就位，结果邀请无应，定然是咕咕！记账+1</p><p><strong>2020-11-26 @Master易</strong> 老公说:一日当三请吾友，于是记账+3</p><p><strong>2020-11-20 @Master易</strong> 老公今日拍了某街景，想请我吃红柳烤羊肉，先记下+1</p><p><strong>2020-11-18 @Master易</strong> 今天获得了一个大奖励箱子，为了庆祝，给老公记账+1</p><p><strong>2020-11-17 @Master易</strong> 来路作归途</p><p><strong>2020-11-14 @Master易</strong> 今日老公强势带飞，觉得应当庆祝下，记账+1</p><p><strong>2020-11-12 @无名之辈</strong> 老公为了给比达尔庆祝生日，主动要求记账+1</p><p><strong>2020-11-11 @Master易</strong> 今日老公说了句什么仨凝光了，比达尔说是好事，那果断需要庆祝一波，记账+1</p><p><strong>2020-11-11 @Master易</strong> 试记账+1</p><p><strong>2020-11-08 @Master易</strong> 真正的体贴是让人察觉不到的</p><p><strong>2020-11-07 @Master易</strong> 今日首胜，比达尔偷偷去拿了，但老公并没出现，于是得记账啊+1</p><p><strong>2020-11-06 @Master易</strong> 也不是什么捞博客</p><p><strong>2020-10-29 @Master易</strong> 老公声称要一起首胜，结果上号发现并没有人，果断记账+1</p><p><strong>2020-10-28 @无名之辈</strong> 我的鼠标对准了他，他就算死了。 ——TX</p><p><strong>2020-10-19 @Master易</strong> 一颗龙心向日月，去留肝胆两昆仑</p><p><strong>2020-10-18 @Master易</strong> 罢了，最好还是无事发生</p><p><strong>2020-10-09 @Master易</strong> 老公被放出来过于开心，想请饭，+1</p><p><strong>2020-10-04 @Master易</strong> 各有渡口，各有归舟。</p><p><strong>2020-09-27 @Master易</strong> 为了我的旅行</p><p><strong>2020-09-26 @Master易</strong> 人在2岁左右的时候会无意间说出前世记忆，濒死体验为主，到7岁左右完全忘记</p><p><strong>2020-09-24 @Master易</strong> 有个老公他虽然不是故意的，但是他当了一回内鬼，里应外合，背刺了善良淳朴的我，记账+1</p><p><strong>2020-09-20 @无名之辈</strong> 无法嗨起来，略有些低沉</p><p><strong>2020-09-14 @Master易</strong> 今天的云是这样</p><p><strong>2020-09-12 @无名之辈</strong> 秋名山上行人稀，常有车手较高低，如今车道依然在，不见当年老司机</p><p><strong>2020-09-09 @Master易</strong> 莫问归期</p><p><strong>2020-09-06 @Master易</strong> 那些荒唐传闻化名称为青春</p><p><strong>2020-09-05 @无名之辈</strong> 恰恰是竭尽全力，依旧未能得偿所愿，可世道大方向，终究是被逐渐扭转，所以反而更加能够让旁观者动容。</p><p><strong>2020-09-05 @无名之辈</strong> 黄花黄，白云白，青山青，少年年少。</p><p><strong>2020-08-21 @Master易</strong> 夏天好像走了</p><p><strong>2020-08-06 @Master易</strong> 老公突然一声：“万物皆可记账！” 一拍锅叫我记账，那我必遂他意，老公记账+1！</p><p><strong>2020-08-05 @Master易</strong> 准备周末安排3人份烤肉，估计老公会咕咕，预记账+1</p><p><strong>2020-08-03 @Master易</strong> 我们落魄山，行走江湖，门风很正，诚字当头！</p><p><strong>2020-08-03 @Master易</strong> 极速车王</p><p><strong>2020-07-31 @Master易</strong> 喜欢惬意的躺在地上的狗</p><p><strong>2020-07-28 @Master易</strong> 身为野老，路见游民</p><p><strong>2020-07-26 @Master易</strong> 那都是很好很好的，可是我偏不喜欢</p><p><strong>2020-07-24 @Master易</strong> 预计安排一波烤肉，没想到比达尔和老公居然双双咕咕，直接老公记账+2！！</p><p><strong>2020-07-23 @Master易</strong> 世界上最廉价的东西是什么，大概就是付出吧，一贫如洗的真心，一事无成的温柔</p><p><strong>2020-07-21 @Master易</strong> 壁立千仞,无欲则刚，而我Master易，刚</p><p><strong>2020-07-18 @Master易</strong> 今天本来要烤肉安排，结果老公唤来狂风骤雨试图阻止记账，必对其记账+1！以示惩戒</p><p><strong>2020-07-17 @无名之辈</strong> 走了</p><p><strong>2020-07-17 @无名之辈</strong> 以后，这里只会有易一个人</p><p><strong>2020-07-16 @Master易</strong> 万人丛中一握手，使我衣袖三年香</p><p><strong>2020-07-16 @Master易</strong> 穿心回首泪千行</p><p><strong>2020-07-16 @Master易</strong> 遇事不决，可问春风</p><p><strong>2020-07-12 @Master易</strong> 谁能讲个故事哄易大师睡觉呢</p><p><strong>2020-07-10 @Master易</strong> 今天老公带来了安排上回家の票の胜利消息，必须庆祝！记账+1！</p><p><strong>2020-07-10 @Master易</strong> 能吃能喝能睡，这就是幸福的一天</p><p><strong>2020-07-09 @Master易</strong> 学其上，仅得其中</p><p><strong>2020-07-07 @Master易</strong> 优雅是简约之父</p><p><strong>2020-07-06 @无名之辈</strong> 看来是好了，把三天的逻辑统一了</p><p><strong>2020-07-05 @Master易</strong> 可是这个模块我只想记录短文字</p><p><strong>2020-07-05 @jackyfzh</strong> 感觉易大师还可以加一个回复功能（就变成正真的动态了）</p><p><strong>2020-07-05 @Master易</strong> 改了下视图，希望明天能好</p><p><strong>2020-07-05 @Master易</strong> 没修好</p><p><strong>2020-07-04 @jackyfzh</strong> 易大师bug修好了吗？</p><p><strong>2020-07-04 @Master易</strong> 比达尔请客吃饭，老公居然爽约，无奈记账一笔+1</p><p><strong>2020-07-04 @Master易</strong> 你说这不是巧了吗</p><p><strong>2020-07-03 @jackyfzh</strong> 易大师的首页又修好啦！</p><p><strong>2020-07-03 @jackyfzh</strong> 易大师的时间线也是蛮漂亮的嘛</p><p><strong>2020-07-01 @Master易</strong> 完结是因为开始过，失败是因为战斗过，分手是因为相遇过，死去是因为你真的活过</p><p><strong>2020-07-01 @Master易</strong> 谁家少年不风流谁人长情常如酒，谁无个见字如面斗转二十秋</p><p><strong>2020-06-30 @datatest.org</strong> 路过支持！！</p><p><strong>2020-06-30 @jackyfzh</strong> 愿易大师的网站越做越牛</p><p><strong>2020-06-30 @Master易</strong> 墨舞雪飞生妙笔，落剑流水花无情</p><p><strong>2020-06-24 @Master易</strong> 德国肉厂疫情大爆发！老公幸免于难！喜大普奔，必须记账+1！然不知为何被加倍，又+1！</p><p><strong>2020-06-23 @Master易</strong> 为纪念差点就为了给比达尔庆祝通关给老公记上账这件事，给老公记账+1</p><p><strong>2020-06-20 @Master易</strong> 被正宗东北特色小吃所吸引，给老公记账一顿烤冷面+1，（小龙虾大闸蟹至尊烤冷面2份）老公主动要求再加两份泡面！</p><p><strong>2020-06-15 @Master易</strong> 比达尔实在是在弱鸡了，居然连百度都不会用，于是给老公记账+1</p><p><strong>2020-01-18 @Master易</strong> 准备在过年之前给老公记一次帐，虽觉不忍，但高票通过，无法回避，于是给老公记账+1</p><p><strong>2020-01-01 @Master易</strong> 相约懒婆娘火锅，老公未至，请饭+1，事后装死，罪加一等又+1，晚饭未安排再+1</p><p><strong>2019-12-28 @Master易</strong> 相约比达尔家看比达尔洗衣服，吃串，玩游戏，而老公爽约，遂请饭+1</p><p><strong>2019-12-25 @Master易</strong> 老公の庆余年、小丑、巫师三连击试图让我没有学习时间，但我怎会上当，反手就来个记账+1</p><p><strong>2019-12-23 @Master易</strong> 易大师和比达尔的部落战平了，被人打了个三星，要是老公在，这结局定然不会如此悲凉，遂老公请饭记账本+1</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;之前博客的Timeline&lt;/p&gt;</summary>
    
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>江北诗仙与书中有酒</title>
    <link href="https://zhongkangjk.github.io/2022/04/27/%E6%B1%9F%E5%8C%97%E8%AF%97%E4%BB%99%E4%B8%8E%E4%B9%A6%E4%B8%AD%E6%9C%89%E9%85%92/"/>
    <id>https://zhongkangjk.github.io/2022/04/27/%E6%B1%9F%E5%8C%97%E8%AF%97%E4%BB%99%E4%B8%8E%E4%B9%A6%E4%B8%AD%E6%9C%89%E9%85%92/</id>
    <published>2022-04-26T16:00:15.000Z</published>
    <updated>2022-04-26T16:01:56.105Z</updated>
    
    <content type="html"><![CDATA[<p>迁移</p><span id="more"></span><h3 id="江北诗仙"><a href="#江北诗仙" class="headerlink" title="江北诗仙"></a>江北诗仙</h3><p>路上行人雨纷纷，没带伞的欲断魂</p><hr><p>年年难过年年过，夜夜梦回夜不回</p><hr><p>殷勤昨夜三更，又得浮生一日</p><hr><p>杨柳依依不知门，无处寻那不归人</p><h3 id="书中有酒"><a href="#书中有酒" class="headerlink" title="书中有酒"></a>书中有酒</h3><p>陈平安忍住笑意，背后剑仙已经自行出鞘，悬停在他身前。<br>陈平安一步越上剑仙，御剑远去，气势如虹，剑气冲天，远游天地间。</p><hr><p>我跟你说啊，我其实真是流落民间的公主殿下，小时候我在家里都用金扁担的，馒头儿，吃一个丢一个。</p><hr><p>杏花巷，一个孩子又蹲在糖葫芦摊子不远处，每次都蹲一会儿，时间不久，但让摊子主人记得了那张黝黑小脸庞。<br>终于有一次，卖糖葫芦的男人摘下一支糖葫芦，笑到:“给你，不收钱。”<br>孩子赶紧起身，摇摇头，腼腆一笑，撒腿跑了。 那之后，再也没有看到孩子的身影。</p><hr><p>石柔告诉他有天放学，裴钱拽着一只死了的大白鹅脖子，扛着回到了骑龙巷铺子，然后去将大白鹅埋在了不知道什么地方。<br>裴钱当时在自己屋子里边一个人抄着书。</p><hr><p>停顿片刻，陈平安眼神坚毅道:“那么就算上我一个！”<br>又一个停顿，陈平安笑容灿烂，“我会让他知道什么叫天底下最快的剑。”</p><hr><p>裴钱便高高跃起，落在墙头之上，纵身飞跃，转瞬即逝。<br>如那崔东山锁看书上所写。<br>跃而登屋，瓦片无声，时方月明，去如飞鸟。</p><hr><p>陈平安笑到:”山下的市井坊间，年关难过年年过”。</p><hr><p>这封家书的末尾，陈平安答应裴钱，他已经点头答应，在自己开山大弟子的鼎力引荐之下，正式擢升哑巴湖大水怪周米粒，为落魄山右护法，并且准许裴钱亲自将此事昭告落魄山上上下下。</p><hr><p>孩子低着头，双手使劲攥紧系挂箩筐的绳子，摇摇晃晃，离开了宅子和巷子，再也没有回家。</p><hr><p>李二瞥了眼那盘故意被放在陈平安手边的菜，结果发现媳妇瞥了眼自己，李二便懂了，这盘冬笋炒肉，没他事儿。</p><hr><p>崔东山陪着裴钱直奔灵芝斋，结果把裴钱看得愁眉不展苦兮兮，那些物件宝贝，琳琅满目是不假，看着都喜欢，只分很喜欢和一般喜欢，可是她根本买不起啊，哪怕裴钱逛完了灵芝斋楼上楼下、左左右右的所有大小角落，依旧没能发现一件自己掏腰包可以买到手的礼物，只是裴钱直到病恹恹走出灵芝斋，也没跟崔东山借钱，崔东山也没开口说要借钱，两人再去麋鹿崖那边的山脚店铺一条街。<br>裴钱一下子如鱼得水，欢天喜地，这儿东西多，价格还不贵，几颗雪花钱的物件，茫茫多，挑花了眼。<br>掂量了一下钱袋子，底气十足，她走路的时候，就眉开眼笑了。也就是这儿人多，不然不耍一套疯魔剑法，都无法表达她心中的高兴。<br>街道上熙熙攘攘，从浩然天下来此游历的女子修士居多，光是她们各有千秋的发髻衣饰，就让裴钱看得啧啧称奇，有那两髻高耸如青山、犀角梳篱的妇人，长裙宽松袖如行云，哪怕不是姿容如何漂亮的女子，也显得婀娜多姿，还有那青丝盘起、再挽一髻、珠翠如花木攒簇的女子，看得裴钱那叫一个羡慕，她们的脑阔上都是顶着一座小小的金山银山呐。<br>咋个天底下与自己一般有钱的人，就这么多嘞？</p><hr><p>小姑娘当时屁颠屁颠跟在裴钱身旁，使劲摇头，不说了不说了，自己之前是怕裴钱和暖树姐姐忘记，才多说两遍的。想事情可费劲。<br>最后小米粒还叮嘱裴钱，要是以后忘记了，千万记得跟她说啊，到时候她就再说一遍。<br>夜幕中，裴钱伸手掬水，明月在手。</p><hr><p>举形望向朝暮那边，伸出手指在嘴边，摇摇头，示意朝暮千万不要说话。</p><p>朝暮蹑手蹑脚站起身，原来那位裴姐姐，抄着书，不知怎么的，在流泪。</p><p>裴钱在伤心，以后师父再敲她板栗的时候，师父好像再不用弯腰了。</p><p>那么以后就算师徒终于重逢了，再有一起游历山水，师父大概就再不会伸手再牵起一个小姑娘的手了。</p><p>怎么就长大了呢。</p><p>以前大白鹅小师兄说过一个笑话，问她这个大师姐，晓不晓得天底下哪个家伙的忧愁最多。</p><p>裴钱当然说是自己的师父，因为师父最喜欢想事情、最喜欢照顾别人啊。</p><p>小师兄当时笑着摇头，给出一个很混账的答案。</p><p>说是那个名叫“长大”的家伙。</p><hr>]]></content>
    
    
    <summary type="html">&lt;p&gt;迁移&lt;/p&gt;</summary>
    
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>审查与保密</title>
    <link href="https://zhongkangjk.github.io/2022/04/26/%E5%AE%A1%E6%9F%A5%E4%B8%8E%E4%BF%9D%E5%AF%86/"/>
    <id>https://zhongkangjk.github.io/2022/04/26/%E5%AE%A1%E6%9F%A5%E4%B8%8E%E4%BF%9D%E5%AF%86/</id>
    <published>2022-04-26T15:35:22.000Z</published>
    <updated>2022-04-26T15:42:17.797Z</updated>
    
    <content type="html"><![CDATA[<p>摘自舆论</p><span id="more"></span><p>在所谓的公共事务领域，保密机制无处不在。</p><p>因此，仔细推敲你形成自己的看法时所依据的那些事实信息，将是一件富于启发性的益事。</p><p>比如，想想你形成观点所依据的事实是被谁听到、看到、感受到的？具体数目是谁统计的？谁发布的？是那个人亲自告诉你的，还是告诉你的人也是经人转述？发布消息的人能接触到全部真相的几成？当这个人开口说“法国人认为如何如何”时，他考察了哪部分法国人？怎样考察的？在什么时间、什么地点？他获准跟哪些法国人交谈？他读什么报纸？那些法国人的观点又有何根据？你可以问问自己这些问题。</p><p>尽管它们难以回答，但是他们能提醒你：当你形成一个观点时，也许你对事件的真实情况远谈不上了解。</p><p>而这一警示本身就能帮助我们避免一些认知上的谬误。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;摘自舆论&lt;/p&gt;</summary>
    
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
    <category term="随笔" scheme="https://zhongkangjk.github.io/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>django-admin返回一个excel文件的按钮函数记录</title>
    <link href="https://zhongkangjk.github.io/2022/04/23/django-admin%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AAexcel%E6%96%87%E4%BB%B6%E7%9A%84%E6%8C%89%E9%92%AE%E5%87%BD%E6%95%B0%E8%AE%B0%E5%BD%95/"/>
    <id>https://zhongkangjk.github.io/2022/04/23/django-admin%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AAexcel%E6%96%87%E4%BB%B6%E7%9A%84%E6%8C%89%E9%92%AE%E5%87%BD%E6%95%B0%E8%AE%B0%E5%BD%95/</id>
    <published>2022-04-23T11:19:30.000Z</published>
    <updated>2022-04-23T11:24:50.665Z</updated>
    
    <content type="html"><![CDATA[<p>需要返回一个excel文件</p><span id="more"></span><h3 id="函数本体"><a href="#函数本体" class="headerlink" title="函数本体"></a>函数本体</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> 统计到<span class="title">excel</span>(<span class="params">self, request, queryset</span>):</span></span><br><span class="line">        <span class="comment">### 统计数量和</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> 返回姓名的合计(<span class="params">姓名</span>):</span></span><br><span class="line">            字典 = queryset.<span class="built_in">filter</span>(姓名=姓名).aggregate(Sum(<span class="string">&#x27;******&#x27;</span>),Sum(<span class="string">&#x27;****&#x27;</span>))</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">list</span>(字典.values())</span><br><span class="line">        姓名集合 = <span class="built_in">set</span>(queryset.<span class="built_in">all</span>().values_list(<span class="string">&#x27;姓名&#x27;</span>,flat=<span class="literal">True</span>)) <span class="comment">#主题去重</span></span><br><span class="line">        数据列表 = [[姓名,*返回姓名的合计(姓名)] <span class="keyword">for</span> 姓名 <span class="keyword">in</span> 姓名集合] <span class="comment">#制造数据列表</span></span><br><span class="line"></span><br><span class="line">        rd_book = xlrd.open_workbook(<span class="string">&#x27;******&#x27;</span>,formatting_info=<span class="literal">True</span>)</span><br><span class="line">        wb = copy(rd_book)  <span class="comment">#复制一下表</span></span><br><span class="line">        wb_sheet = wb.get_sheet(<span class="number">0</span>)</span><br><span class="line">        <span class="comment"># 设置单元格格式边框</span></span><br><span class="line">        borders = xlwt.Borders()</span><br><span class="line">        borders.left = <span class="number">1</span></span><br><span class="line">        borders.right = <span class="number">1</span></span><br><span class="line">        borders.top = <span class="number">1</span></span><br><span class="line">        borders.bottom = <span class="number">1</span></span><br><span class="line">        style = xlwt.XFStyle()</span><br><span class="line">        style.borders = borders</span><br><span class="line">        <span class="comment"># 设置单元格背景色为黄色</span></span><br><span class="line">        style1 = xlwt.XFStyle()</span><br><span class="line">        pattern = xlwt.Pattern()</span><br><span class="line">        pattern.pattern = xlwt.Pattern.SOLID_PATTERN</span><br><span class="line">        pattern.pattern_fore_colour = <span class="number">5</span>  <span class="comment">#5是黄色</span></span><br><span class="line">        style1.pattern = pattern</span><br><span class="line">        style1.borders = borders</span><br><span class="line">        <span class="comment"># 设置单元格字体</span></span><br><span class="line">        font = xlwt.Font()</span><br><span class="line">        font.name = <span class="string">&#x27;微软雅黑&#x27;</span></span><br><span class="line">        font.bold = <span class="literal">True</span></span><br><span class="line">        style.font = font</span><br><span class="line"></span><br><span class="line">        <span class="comment">## 一行一行往上套公式啊</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(数据列表)):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(数据列表[i])):</span><br><span class="line">                wb_sheet.write(i+<span class="number">3</span>,j,数据列表[i][j],style)</span><br><span class="line">            当前行 = <span class="built_in">str</span>(i+<span class="number">4</span>)</span><br><span class="line">            wb_sheet.write(i+<span class="number">3</span>,<span class="built_in">len</span>(数据列表[i]),xlwt.Formula(<span class="string">&#x27;B3*B&#x27;</span>+当前行+<span class="string">&#x27;+C3*C&#x27;</span>+当前行+<span class="string">&#x27;+D3*D&#x27;</span>+当前行+<span class="string">&#x27;+E3*E&#x27;</span>+当前行+<span class="string">&#x27;+F3*F&#x27;</span>+当前行+<span class="string">&#x27;+G3*G&#x27;</span>+当前行+<span class="string">&#x27;+H3*H&#x27;</span>+当前行+<span class="string">&#x27;+I3*I&#x27;</span>+当前行+<span class="string">&#x27;+J3*J&#x27;</span>+当前行+<span class="string">&#x27;+K3*K&#x27;</span>+当前行+<span class="string">&#x27;+L3*L&#x27;</span>+当前行+<span class="string">&#x27;+M3*M&#x27;</span>+当前行+<span class="string">&#x27;+N3*N&#x27;</span>+当前行+<span class="string">&#x27;+O3*O&#x27;</span>+当前行+<span class="string">&#x27;+P3*P&#x27;</span>+当前行),style1)</span><br><span class="line"></span><br><span class="line">        wb_sheet.write(<span class="built_in">len</span>(数据列表)+<span class="number">3</span>,<span class="number">0</span>,<span class="string">&#x27;数量合计&#x27;</span>,style)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(数据列表[<span class="number">0</span>])-<span class="number">1</span>):</span><br><span class="line">            wb_sheet.write(<span class="built_in">len</span>(数据列表)+<span class="number">3</span>,i+<span class="number">1</span>,xlwt.Formula(<span class="string">&#x27;SUM(&#x27;</span>+<span class="built_in">chr</span>(<span class="number">66</span>+i)+<span class="string">&#x27;4:&#x27;</span>+<span class="built_in">chr</span>(<span class="number">66</span>+i)+<span class="built_in">str</span>(<span class="built_in">len</span>(数据列表)+<span class="number">3</span>)+<span class="string">&#x27;)&#x27;</span>),style1)</span><br><span class="line"></span><br><span class="line">        wb_sheet.write(<span class="built_in">len</span>(数据列表)+<span class="number">4</span>,<span class="number">0</span>,<span class="string">&#x27;金额合计&#x27;</span>,style1)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(数据列表[<span class="number">0</span>])-<span class="number">1</span>):</span><br><span class="line">            wb_sheet.write(<span class="built_in">len</span>(数据列表)+<span class="number">4</span>,i+<span class="number">1</span>,xlwt.Formula(<span class="built_in">chr</span>(<span class="number">66</span>+i)+<span class="string">&#x27;3*&#x27;</span>+<span class="built_in">chr</span>(<span class="number">66</span>+i)+<span class="built_in">str</span>(<span class="built_in">len</span>(数据列表)+<span class="number">4</span>)),style1)</span><br><span class="line">        wb_sheet.write(<span class="built_in">len</span>(数据列表)+<span class="number">3</span>,<span class="built_in">len</span>(数据列表[<span class="number">0</span>]),<span class="string">&#x27;&#x27;</span>,style1)</span><br><span class="line">        wb_sheet.write(<span class="built_in">len</span>(数据列表)+<span class="number">4</span>,<span class="built_in">len</span>(数据列表[<span class="number">0</span>]),xlwt.Formula(<span class="string">&#x27;SUM(B&#x27;</span>+<span class="built_in">str</span>(<span class="built_in">len</span>(数据列表)+<span class="number">4</span>+<span class="number">1</span>)+<span class="string">&#x27;:P&#x27;</span>+<span class="built_in">str</span>(<span class="built_in">len</span>(数据列表)+<span class="number">4</span>+<span class="number">1</span>)+<span class="string">&#x27;)&#x27;</span>),style1)</span><br><span class="line">        filename = <span class="string">&#x27;提成汇总表&#x27;</span>  <span class="comment">#中文不行 我也不知道为什么</span></span><br><span class="line">        response = HttpResponse(content_type=<span class="string">&#x27;application/vnd.ms-excel&#x27;</span>)</span><br><span class="line">        response[<span class="string">&#x27;Content-Disposition&#x27;</span>] = <span class="string">&#x27;attachment;filename=%s.xls&#x27;</span> % filename</span><br><span class="line">        wb.save(response)</span><br><span class="line">        <span class="keyword">return</span> response</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;需要返回一个excel文件&lt;/p&gt;</summary>
    
    
    
    <category term="计算机" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="python" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/python/"/>
    
    
    <category term="django" scheme="https://zhongkangjk.github.io/tags/django/"/>
    
  </entry>
  
  <entry>
    <title>DJango admin 增加自定义筛选器</title>
    <link href="https://zhongkangjk.github.io/2022/04/20/DJango-admin-%E5%A2%9E%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AD%9B%E9%80%89%E5%99%A8/"/>
    <id>https://zhongkangjk.github.io/2022/04/20/DJango-admin-%E5%A2%9E%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E7%AD%9B%E9%80%89%E5%99%A8/</id>
    <published>2022-04-20T01:09:17.000Z</published>
    <updated>2022-04-20T01:13:28.855Z</updated>
    
    <content type="html"><![CDATA[<p>增加自定义的筛选器</p><span id="more"></span><p><code>app/admin.py</code></p><h3 id="增加一个只选取月份的筛选器"><a href="#增加一个只选取月份的筛选器" class="headerlink" title="增加一个只选取月份的筛选器"></a>增加一个只选取月份的筛选器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UpdatedAtFilter</span>(<span class="params">admin.SimpleListFilter</span>):</span></span><br><span class="line">    title = <span class="string">&#x27;选择月份&#x27;</span></span><br><span class="line">    parameter_name = <span class="string">&#x27;月份&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 菜单列表</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lookups</span>(<span class="params">self, request, model_admin</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        List of values to allow admin to select</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        months = (</span><br><span class="line">            (<span class="number">1</span>, <span class="string">&#x27;一月&#x27;</span>),</span><br><span class="line">            (<span class="number">2</span>, <span class="string">&#x27;二月&#x27;</span>),</span><br><span class="line">            (<span class="number">3</span>, <span class="string">&#x27;三月&#x27;</span>),</span><br><span class="line">            (<span class="number">4</span>, <span class="string">&#x27;四月&#x27;</span>),</span><br><span class="line">            (<span class="number">5</span>, <span class="string">&#x27;五月&#x27;</span>),</span><br><span class="line">            (<span class="number">6</span>, <span class="string">&#x27;六月&#x27;</span>),</span><br><span class="line">            (<span class="number">7</span>, <span class="string">&#x27;七月&#x27;</span>),</span><br><span class="line">            (<span class="number">8</span>, <span class="string">&#x27;八月&#x27;</span>),</span><br><span class="line">            (<span class="number">9</span>, <span class="string">&#x27;九月&#x27;</span>),</span><br><span class="line">            (<span class="number">10</span>, <span class="string">&#x27;十月&#x27;</span>),</span><br><span class="line">            (<span class="number">11</span>, <span class="string">&#x27;十一月&#x27;</span>),</span><br><span class="line">            (<span class="number">12</span>, <span class="string">&#x27;十二月&#x27;</span>)</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">return</span> months</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">queryset</span>(<span class="params">self, request, queryset</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Return the filtered queryset</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self.value():</span><br><span class="line">            <span class="comment"># DateTime Field can use __month to get its month value</span></span><br><span class="line">            <span class="keyword">return</span> queryset.<span class="built_in">filter</span>(到期日__month=self.value())</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> queryset</span><br><span class="line"><span class="meta">@admin.register(<span class="params">催费表<span class="number">22</span>年类</span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> ********(<span class="params">******</span>):</span></span><br><span class="line">    list_filter = (<span class="string">&#x27;***&#x27;</span>,<span class="string">&#x27;***&#x27;</span>,<span class="string">&#x27;***&#x27;</span>,UpdatedAtFilter,) <span class="comment">#筛选器</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;增加自定义的筛选器&lt;/p&gt;</summary>
    
    
    
    <category term="计算机" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="python" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/python/"/>
    
    
    <category term="django" scheme="https://zhongkangjk.github.io/tags/django/"/>
    
  </entry>
  
  <entry>
    <title>中文化Django自带后台名字</title>
    <link href="https://zhongkangjk.github.io/2022/04/15/%E4%B8%AD%E6%96%87%E5%8C%96Django%E8%87%AA%E5%B8%A6%E5%90%8E%E5%8F%B0%E5%90%8D%E5%AD%97/"/>
    <id>https://zhongkangjk.github.io/2022/04/15/%E4%B8%AD%E6%96%87%E5%8C%96Django%E8%87%AA%E5%B8%A6%E5%90%8E%E5%8F%B0%E5%90%8D%E5%AD%97/</id>
    <published>2022-04-15T01:36:48.000Z</published>
    <updated>2022-04-15T01:44:46.911Z</updated>
    
    <content type="html"><![CDATA[<p>自带后台各属性改中文</p><span id="more"></span><h3 id="网站标题-头"><a href="#网站标题-头" class="headerlink" title="网站标题 头"></a>网站标题 头</h3><p><code>app/admin.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line">admin.site.site_header = <span class="string">&#x27;催费&#x27;</span></span><br><span class="line">admin.site.site_title = <span class="string">&#x27;催费&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="大菜单"><a href="#大菜单" class="headerlink" title="大菜单"></a>大菜单</h3><p><code>app/__init__.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> django.apps <span class="keyword">import</span> AppConfig</span><br><span class="line"> </span><br><span class="line">VERBOSE_APP_NAME = <span class="string">&#x27;大菜单名字&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_current_app_name</span>(<span class="params">file</span>):</span></span><br><span class="line">    <span class="keyword">return</span> path.dirname(file).replace(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>).split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>]</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppVerboseNameConfig</span>(<span class="params">AppConfig</span>):</span></span><br><span class="line">    name = get_current_app_name(__file__)</span><br><span class="line">    verbose_name = VERBOSE_APP_NAME</span><br><span class="line"> </span><br><span class="line">default_app_config = get_current_app_name(__file__) + <span class="string">&#x27;.__init__.AppVerboseNameConfig&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="小菜单"><a href="#小菜单" class="headerlink" title="小菜单"></a>小菜单</h3><p><code>app/models.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">model</span>类(<span class="params">models.Model</span>):</span></span><br><span class="line"><span class="keyword">pass</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        verbose_name = <span class="string">&#x27;小菜单名字&#x27;</span></span><br><span class="line">        verbose_name_plural = <span class="string">&quot;&#x27;小菜单名字&quot;</span></span><br></pre></td></tr></table></figure><h3 id="字段名字"><a href="#字段名字" class="headerlink" title="字段名字"></a>字段名字</h3><p><code>app/models.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">model</span>类(<span class="params">models.Model</span>):</span></span><br><span class="line">age = models.CharField(<span class="string">&#x27;字段名字&#x27;</span>,max_length=<span class="number">5</span>,blank=<span class="literal">True</span>,null=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;自带后台各属性改中文&lt;/p&gt;</summary>
    
    
    
    <category term="计算机" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="python" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/python/"/>
    
    
    <category term="django" scheme="https://zhongkangjk.github.io/tags/django/"/>
    
  </entry>
  
  <entry>
    <title>uniapp部署的网页端非主页刷新404问题的解决方案</title>
    <link href="https://zhongkangjk.github.io/2022/04/08/uniapp%E9%83%A8%E7%BD%B2%E7%9A%84%E7%BD%91%E9%A1%B5%E7%AB%AF%E9%9D%9E%E4%B8%BB%E9%A1%B5%E5%88%B7%E6%96%B0404%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <id>https://zhongkangjk.github.io/2022/04/08/uniapp%E9%83%A8%E7%BD%B2%E7%9A%84%E7%BD%91%E9%A1%B5%E7%AB%AF%E9%9D%9E%E4%B8%BB%E9%A1%B5%E5%88%B7%E6%96%B0404%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</id>
    <published>2022-04-08T15:16:08.000Z</published>
    <updated>2022-04-08T15:19:57.953Z</updated>
    
    <content type="html"><![CDATA[<p>在nginx增加一行</p><span id="more"></span><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line"><span class="attribute">try_files</span> $uri $uri/ /index.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实测么的问题，但其实我不知道为啥，无它，百度尔</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;在nginx增加一行&lt;/p&gt;</summary>
    
    
    
    <category term="计算机" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="前端" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="uniapp" scheme="https://zhongkangjk.github.io/tags/uniapp/"/>
    
  </entry>
  
  <entry>
    <title>合成单张发票PDF到一个PDF方便打印</title>
    <link href="https://zhongkangjk.github.io/2022/03/25/%E5%90%88%E6%88%90%E5%8D%95%E5%BC%A0%E5%8F%91%E7%A5%A8PDF%E5%88%B0%E4%B8%80%E4%B8%AAPDF%E6%96%B9%E4%BE%BF%E6%89%93%E5%8D%B0/"/>
    <id>https://zhongkangjk.github.io/2022/03/25/%E5%90%88%E6%88%90%E5%8D%95%E5%BC%A0%E5%8F%91%E7%A5%A8PDF%E5%88%B0%E4%B8%80%E4%B8%AAPDF%E6%96%B9%E4%BE%BF%E6%89%93%E5%8D%B0/</id>
    <published>2022-03-25T06:04:01.000Z</published>
    <updated>2022-03-25T06:12:38.029Z</updated>
    
    <content type="html"><![CDATA[<p>发票pdf都是占一张A4纸，给他合成到一起两张打一页</p><span id="more"></span><h3 id="转载自不知名"><a href="#转载自不知名" class="headerlink" title="转载自不知名"></a>转载自不知名</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> PyPDF2 <span class="keyword">import</span> PdfFileReader</span><br><span class="line"><span class="keyword">from</span> PyPDF2 <span class="keyword">import</span> PdfFileWriter</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;将需要转换的文件夹拖入命令行 按回车（默认为此文件所在目录）&quot;</span>)</span><br><span class="line">workpath = <span class="built_in">input</span>()</span><br><span class="line"><span class="keyword">if</span> workpath == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">    workpath = os.getcwd()</span><br><span class="line">output = os.path.join(workpath,<span class="string">&quot;合并后的.pdf&quot;</span>)</span><br><span class="line">filelist = []</span><br><span class="line"></span><br><span class="line">files = os.listdir(workpath)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">    <span class="keyword">if</span> file.split(<span class="string">&#x27;.&#x27;</span>)[-<span class="number">1</span>] <span class="keyword">in</span> [<span class="string">&#x27;pdf&#x27;</span>, <span class="string">&#x27;PDF&#x27;</span>]:</span><br><span class="line">        filelist.append(os.path.join(workpath, file))</span><br><span class="line"></span><br><span class="line">filenum = <span class="built_in">len</span>(filelist)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;共找到%d个pdf文件&quot;</span> %filenum)</span><br><span class="line"> </span><br><span class="line">writer = PdfFileWriter()  <span class="comment">#实例化写类</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(filenum):</span><br><span class="line">    pageobj = PdfFileReader(filelist[i]).getPage(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        blankpage = writer.addBlankPage(<span class="number">610</span>,<span class="number">810</span>)</span><br><span class="line">        blankpage.mergeTranslatedPage(pageobj,<span class="number">0</span>,<span class="number">410</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        blankpage.mergeTranslatedPage(pageobj,<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line"><span class="comment"># writer.removeLinks() # 移除交互链接,部分发票pdf文件在位移后会有图章重复的情况,需要移除.</span></span><br><span class="line">writer.write(<span class="built_in">open</span>(output,<span class="string">&#x27;wb&#x27;</span>)) <span class="comment"># 写入新的文件,完成合并.</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;转换成功 输出文件&quot;</span>,output)</span><br><span class="line"><span class="comment">#如果是在当前文件夹，最好把结果文件处理到别的地方</span></span><br><span class="line"><span class="comment">#个别发票平台移除交互链接会把签章去掉</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;发票pdf都是占一张A4纸，给他合成到一起两张打一页&lt;/p&gt;</summary>
    
    
    
    <category term="计算机" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="python" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/python/"/>
    
    
    <category term="python" scheme="https://zhongkangjk.github.io/tags/python/"/>
    
    <category term="pdf" scheme="https://zhongkangjk.github.io/tags/pdf/"/>
    
  </entry>
  
  <entry>
    <title>django导入更新数据脚本</title>
    <link href="https://zhongkangjk.github.io/2022/03/23/django%E5%AF%BC%E5%85%A5%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE%E8%84%9A%E6%9C%AC/"/>
    <id>https://zhongkangjk.github.io/2022/03/23/django%E5%AF%BC%E5%85%A5%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE%E8%84%9A%E6%9C%AC/</id>
    <published>2022-03-23T06:35:07.000Z</published>
    <updated>2022-04-26T16:27:05.059Z</updated>
    
    <content type="html"><![CDATA[<p>把操作django数据库的导入更新操作汇总一下以备参考</p><span id="more"></span><h3 id="之前利用爬虫更新表内数据和用时间计算表数据的日更操作脚本"><a href="#之前利用爬虫更新表内数据和用时间计算表数据的日更操作脚本" class="headerlink" title="之前利用爬虫更新表内数据和用时间计算表数据的日更操作脚本"></a>之前利用爬虫更新表内数据和用时间计算表数据的日更操作脚本</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os,sys,django</span><br><span class="line"><span class="keyword">import</span> asyncio,datetime,calendar</span><br><span class="line"><span class="keyword">import</span> httpx,json,time,math</span><br><span class="line"><span class="keyword">from</span> dateutil.relativedelta <span class="keyword">import</span> relativedelta</span><br><span class="line"><span class="keyword">from</span> django.db.models <span class="keyword">import</span> Q</span><br><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.mime.application <span class="keyword">import</span> MIMEApplication</span><br><span class="line">project_path = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line">sys.path.append(project_path)</span><br><span class="line">os.environ[<span class="string">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>] = <span class="string">&#x27;shuai4.settings&#x27;</span></span><br><span class="line">django.setup()</span><br><span class="line"><span class="keyword">from</span> cuifei.models <span class="keyword">import</span> 催费表<span class="number">22</span>年类,可收表<span class="number">19</span>年,可收表<span class="number">20</span>年,催费表类</span><br><span class="line"><span class="keyword">from</span> shuju.models <span class="keyword">import</span> 数据通知表类</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> 取结果(<span class="params">r</span>):</span></span><br><span class="line">    <span class="keyword">if</span> r[<span class="string">&#x27;obj&#x27;</span>]:</span><br><span class="line">        j = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> r[<span class="string">&#x27;obj&#x27;</span>]:</span><br><span class="line">            j.append(i[<span class="string">&#x27;fwqx&#x27;</span>])</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(j),r[<span class="string">&#x27;obj&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;jbrdh&#x27;</span>]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span>,<span class="literal">None</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Authorization&#x27;</span>: <span class="string">&#x27;***&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">url_by_税号 = <span class="string">&#x27;***&#x27;</span></span><br><span class="line">查税号URL= <span class="string">&#x27;***&#x27;</span></span><br><span class="line"></span><br><span class="line">文本 = []</span><br><span class="line"><span class="comment"># print(催费表22年类.objects.all()[:5])</span></span><br><span class="line">queryset = 催费表<span class="number">22</span>年类.objects.<span class="built_in">all</span>()</span><br><span class="line"><span class="function"><span class="keyword">def</span> 更新到期日和时间(<span class="params">queryset</span>):</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> 爬(<span class="params">client,body</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> 保存结果(<span class="params">结果,body</span>):</span></span><br><span class="line">            <span class="keyword">if</span> 结果[<span class="number">0</span>]:</span><br><span class="line">                body.到期日 = 结果[<span class="number">0</span>]</span><br><span class="line">                <span class="comment"># body.经办人电话 = 结果[1]</span></span><br><span class="line">                body.save(update_fields=[<span class="string">&#x27;到期日&#x27;</span>])</span><br><span class="line"></span><br><span class="line">        r = <span class="keyword">await</span> client.post(url_by_税号,headers=headers, data=json.dumps(&#123;<span class="string">&#x27;khsbh&#x27;</span>: body.税号,&#125;),timeout=<span class="literal">None</span>)</span><br><span class="line">        结果 = 取结果(r.json())</span><br><span class="line">        <span class="keyword">if</span> 结果[<span class="number">0</span>]:</span><br><span class="line">            保存结果(结果,body)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            用名称查的data = json.dumps(&#123;<span class="string">&#x27;count&#x27;</span>:<span class="number">100</span>,<span class="string">&#x27;keyword&#x27;</span>: body.公司名称,<span class="string">&#x27;page&#x27;</span>:<span class="number">0</span>&#125;)</span><br><span class="line">            r = <span class="keyword">await</span> client.post(查税号URL,headers=headers, data=用名称查的data,timeout=<span class="literal">None</span>)</span><br><span class="line">            res_dict = r.json()</span><br><span class="line">            <span class="keyword">if</span> res_dict[<span class="string">&#x27;obj&#x27;</span>]:</span><br><span class="line">                税号<span class="number">1</span> = res_dict[<span class="string">&#x27;obj&#x27;</span>][-<span class="number">1</span>][<span class="string">&#x27;khsbh&#x27;</span>]</span><br><span class="line">                r1 = <span class="keyword">await</span> client.post(url_by_税号,headers=headers, data=json.dumps(&#123;<span class="string">&#x27;khsbh&#x27;</span>: 税号<span class="number">1</span>,&#125;),timeout=<span class="literal">None</span>)</span><br><span class="line">                结果<span class="number">1</span> = 取结果(r1.json())</span><br><span class="line">                保存结果(结果<span class="number">1</span>,body)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span>,<span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> 跑():</span></span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> httpx.AsyncClient() <span class="keyword">as</span> client:</span><br><span class="line">            task_list = []</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> queryset:</span><br><span class="line">                req = 爬(client,i)</span><br><span class="line">                task = asyncio.create_task(req)</span><br><span class="line">                task_list.append(task)</span><br><span class="line">            <span class="keyword">await</span> asyncio.gather(*task_list)</span><br><span class="line">    start = time.time()</span><br><span class="line">    asyncio.run(跑())</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(end-start)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;查日期完成于&#x27;</span>+time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, time.localtime()))</span><br><span class="line">    <span class="comment"># global b</span></span><br><span class="line">    <span class="comment"># b = &#x27;查日期完成于&#x27;+time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime())+&#x27;用时&#x27;+str(end-start)+&#x27;秒&#x27;</span></span><br><span class="line">    文本.append(<span class="string">&#x27;查日期完成于&#x27;</span>+time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, time.localtime())+<span class="string">&#x27;用时&#x27;</span>+<span class="built_in">str</span>(end-start)+<span class="string">&#x27;秒&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> 更新可收年份(<span class="params">queryset</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> queryset:</span><br><span class="line">            <span class="keyword">if</span> i.到期日:</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">type</span>(i.到期日) == <span class="built_in">type</span>(<span class="string">&#x27;s&#x27;</span>):</span><br><span class="line">                    到期日 = datetime.datetime.strptime(i.到期日,<span class="string">&#x27;%Y-%m-%d&#x27;</span>).date()</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    到期日 = i.到期日</span><br><span class="line">                <span class="comment"># print(i.公司名称,i.税号)</span></span><br><span class="line">                a = 可收表<span class="number">19</span>年.objects.<span class="built_in">filter</span>(公司名称__exact = i.公司名称).count()</span><br><span class="line">                <span class="keyword">if</span> a &gt; <span class="number">0</span>:</span><br><span class="line">                    i.可收<span class="number">19</span> = <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    i.可收<span class="number">19</span> = <span class="number">0</span></span><br><span class="line">                b = 可收表<span class="number">20</span>年.objects.<span class="built_in">filter</span>(Q(公司名称__exact = i.公司名称)|Q(税号__exact = i.税号)).count()</span><br><span class="line">                <span class="keyword">if</span> b &gt; <span class="number">0</span>:</span><br><span class="line">                    i.可收<span class="number">20</span> = <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    i.可收<span class="number">20</span> = <span class="number">0</span></span><br><span class="line">                c = 催费表类.objects.<span class="built_in">filter</span>(Q(公司名称__exact = i.公司名称)|Q(税号__exact = i.税号)).count()</span><br><span class="line">                <span class="keyword">if</span> c &gt; <span class="number">0</span>:</span><br><span class="line">                    i.可收<span class="number">21</span> = <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    i.可收<span class="number">21</span> = <span class="number">0</span></span><br><span class="line">                <span class="comment"># print(i.到期日)</span></span><br><span class="line">                <span class="comment"># print(datetime.date.today())</span></span><br><span class="line">                年 = datetime.datetime.now().year</span><br><span class="line">                月 = datetime.datetime.now().month</span><br><span class="line">                下一个月 = (datetime.datetime.now()+relativedelta(months=<span class="number">1</span>)).month</span><br><span class="line">                <span class="comment"># 日 = datetime.datetime.now().day</span></span><br><span class="line">                新日 = calendar.monthrange(年,下一个月)[<span class="number">1</span>]</span><br><span class="line">                <span class="comment"># print(新日)</span></span><br><span class="line">                <span class="comment"># print(datetime.date(年,月,新日)==i.到期日)</span></span><br><span class="line">                <span class="keyword">if</span> datetime.date(年,下一个月,新日)==到期日:</span><br><span class="line">                    差年= <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    差年 = math.ceil((datetime.date(年,下一个月,新日)-到期日)/datetime.timedelta(days=<span class="number">365</span>))</span><br><span class="line">                <span class="comment"># print(差年)</span></span><br><span class="line">                到期日年份 = 到期日.year</span><br><span class="line">                可收字典 = &#123;<span class="number">2015</span>:<span class="number">1</span>,<span class="number">2016</span>:<span class="number">1</span>,<span class="number">2017</span>:<span class="number">1</span>,<span class="number">2018</span>:<span class="number">1</span>,<span class="number">2019</span>:i.可收<span class="number">19</span>,<span class="number">2020</span>:i.可收<span class="number">20</span>,<span class="number">2021</span>:i.可收<span class="number">21</span>,<span class="number">2022</span>:<span class="number">1</span>&#125;</span><br><span class="line">                <span class="comment"># 年份 = sum(listn[:差年])</span></span><br><span class="line">                j = <span class="number">0</span></span><br><span class="line">                <span class="keyword">for</span> i1 <span class="keyword">in</span> <span class="built_in">range</span>(到期日年份,到期日年份+差年):</span><br><span class="line">                    <span class="comment"># print(i1)</span></span><br><span class="line">                    j += 可收字典[i1]</span><br><span class="line">                <span class="comment"># print(j)</span></span><br><span class="line">                i.几年 = j</span><br><span class="line">                i.save(update_fields=[<span class="string">&#x27;可收19&#x27;</span>,<span class="string">&#x27;可收20&#x27;</span>,<span class="string">&#x27;可收21&#x27;</span>,<span class="string">&#x27;几年&#x27;</span>])</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;查可收几年完成于&#x27;</span>+time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, time.localtime()))</span><br><span class="line">    <span class="comment"># global d</span></span><br><span class="line">    <span class="comment"># d = (&#x27;\n&#x27;+&#x27;查可收几年完成于&#x27;+time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time.localtime()))</span></span><br><span class="line">    文本.append(<span class="string">&#x27;查可收几年完成于&#x27;</span>+time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, time.localtime()))</span><br><span class="line">更新到期日和时间(queryset)</span><br><span class="line">更新可收年份(queryset)</span><br><span class="line"><span class="function"><span class="keyword">def</span> 发送邮件(<span class="params">邮件标题,称呼,邮件文字,发件人邮箱,密码,收件人邮箱,附件路径列表,附件命名列表</span>):</span></span><br><span class="line">    msg = MIMEMultipart()</span><br><span class="line">    msg[<span class="string">&quot;Subject&quot;</span>] = 邮件标题</span><br><span class="line">    msg[<span class="string">&quot;From&quot;</span>]    = 发件人邮箱  </span><br><span class="line">    msg[<span class="string">&quot;To&quot;</span>]      = 称呼</span><br><span class="line">    <span class="comment">#这是文字部分</span></span><br><span class="line">    part = MIMEText(邮件文字)</span><br><span class="line">    msg.attach(part)</span><br><span class="line">    <span class="comment">#这是附件部分</span></span><br><span class="line">    <span class="keyword">for</span> 附件路径,附件命名 <span class="keyword">in</span> <span class="built_in">zip</span>(附件路径列表,附件命名列表):</span><br><span class="line">        part = MIMEApplication(<span class="built_in">open</span>(附件路径,<span class="string">&#x27;rb&#x27;</span>).read())</span><br><span class="line">        part.add_header(<span class="string">&#x27;Content-Disposition&#x27;</span>, <span class="string">&#x27;attachment&#x27;</span>, filename=附件命名)</span><br><span class="line">        msg.attach(part)</span><br><span class="line"></span><br><span class="line">    s = smtplib.SMTP(<span class="string">&quot;smtp.qq.com&quot;</span>, timeout=<span class="number">60</span>)<span class="comment">#SMTP服务的网址</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        s.login(发件人邮箱, 密码)</span><br><span class="line">        s.sendmail(发件人邮箱, 收件人邮箱, msg.as_string())<span class="comment">#收件人邮箱可以是列表</span></span><br><span class="line">        s.close()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;发送成功&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;发送失败&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> 拿昨天的老数据(<span class="params">区域</span>):</span></span><br><span class="line">    <span class="comment"># 今天 = datetime.date.today()</span></span><br><span class="line">    昨天 = datetime.date.today() - datetime.timedelta(days=<span class="number">1</span>)</span><br><span class="line">    <span class="comment"># print(昨天)</span></span><br><span class="line">    <span class="comment"># print(type(昨天))</span></span><br><span class="line">    a = 数据通知表类.objects.<span class="built_in">filter</span>(Q(日期 = 昨天)&amp;Q(区域=区域)).values()[<span class="number">0</span>]</span><br><span class="line">    <span class="comment"># for i in a:</span></span><br><span class="line">    <span class="comment">#     print(i)</span></span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> 获得今天的新数据并存数据库(<span class="params">区域</span>):</span></span><br><span class="line">    <span class="comment"># 崂山</span></span><br><span class="line">    今天 = datetime.date.today()</span><br><span class="line">    能查到日期的户数 = 催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(Q(到期日__isnull=<span class="literal">False</span>)&amp;Q(区域=区域)).count()</span><br><span class="line">    查不到日期的户数 = 催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(Q(到期日__isnull=<span class="literal">True</span>)&amp;Q(区域=区域)).count()</span><br><span class="line">    年 = datetime.datetime.now().year</span><br><span class="line">    月 = datetime.datetime.now().month</span><br><span class="line">    日 = calendar.monthrange(年,月)[<span class="number">1</span>]</span><br><span class="line">    下一个月 = (datetime.datetime.now()+relativedelta(months=<span class="number">1</span>)).month</span><br><span class="line">    下一个月日 = calendar.monthrange(年,下一个月)[<span class="number">1</span>]</span><br><span class="line">    到期日为当月的户数 = 催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(Q(到期日__<span class="built_in">range</span>=(datetime.date(年, 月, <span class="number">1</span>),datetime.date(年, 月, 日)))&amp;Q(区域=区域)).count()</span><br><span class="line">    到期日为下月的户数 = 催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(Q(到期日__<span class="built_in">range</span>=(datetime.date(年, 下一个月, <span class="number">1</span>),datetime.date(年, 下一个月,下一个月日)))&amp;Q(区域=区域)).count()</span><br><span class="line">    前一个月 = (datetime.datetime.now()-relativedelta(months=<span class="number">1</span>)).month</span><br><span class="line">    新日 = calendar.monthrange(年,前一个月)[<span class="number">1</span>]</span><br><span class="line">    今年已逾期的户数 = 催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(Q(到期日__<span class="built_in">range</span>=(datetime.date(年, <span class="number">1</span>, <span class="number">1</span>),datetime.date(年, 前一个月, 新日)))&amp;Q(区域=区域)).count()</span><br><span class="line">    下两个月 = (datetime.datetime.now()+relativedelta(months=<span class="number">2</span>)).month</span><br><span class="line">    今年还未到期的户数 = 催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(Q(到期日__<span class="built_in">range</span>=(datetime.date(年,下两个月, <span class="number">1</span>),datetime.date(年, <span class="number">12</span>, <span class="number">31</span>)))&amp;Q(区域=区域)).count()</span><br><span class="line">    往年到期户 = 催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(Q(到期日__lt=datetime.date(年,<span class="number">1</span>,<span class="number">1</span>))&amp;Q(区域=区域)).count()</span><br><span class="line">    <span class="comment"># &amp;Q(几年__gte=1)</span></span><br><span class="line">    更新数据 = &#123;</span><br><span class="line">        <span class="string">&#x27;日期&#x27;</span>:今天,</span><br><span class="line">        <span class="string">&#x27;区域&#x27;</span>:区域,</span><br><span class="line">        <span class="string">&#x27;能查到日期的户数&#x27;</span>:能查到日期的户数,</span><br><span class="line">        <span class="string">&#x27;查不到日期的户数&#x27;</span>:查不到日期的户数,</span><br><span class="line">        <span class="string">&#x27;到期日为当月的户数&#x27;</span>:到期日为当月的户数,</span><br><span class="line">        <span class="string">&#x27;到期日为下月的户数&#x27;</span>:到期日为下月的户数,</span><br><span class="line">        <span class="string">&#x27;今年已逾期的户数&#x27;</span>:今年已逾期的户数,</span><br><span class="line">        <span class="string">&#x27;今年还未到期的户数&#x27;</span>:今年还未到期的户数,</span><br><span class="line">        <span class="string">&#x27;往年到期户&#x27;</span>:往年到期户</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#存数据</span></span><br><span class="line">    数据通知表类.objects.update_or_create(defaults=更新数据,日期=今天,区域=区域)</span><br><span class="line">    a = 数据通知表类.objects.<span class="built_in">filter</span>(Q(日期 = 今天)&amp;Q(区域=区域)).values()[<span class="number">0</span>]</span><br><span class="line">    <span class="comment"># print(a)</span></span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line">崂山新数据字典 = 获得今天的新数据并存数据库(<span class="string">&#x27;崂山&#x27;</span>)</span><br><span class="line">市南新数据字典 = 获得今天的新数据并存数据库(<span class="string">&#x27;市南&#x27;</span>)</span><br><span class="line">市北新数据字典 = 获得今天的新数据并存数据库(<span class="string">&#x27;市北&#x27;</span>)</span><br><span class="line">李沧新数据字典 = 获得今天的新数据并存数据库(<span class="string">&#x27;李沧&#x27;</span>)</span><br><span class="line"></span><br><span class="line">崂山老数据字典 = 拿昨天的老数据(<span class="string">&#x27;崂山&#x27;</span>)</span><br><span class="line">市南老数据字典 = 拿昨天的老数据(<span class="string">&#x27;市南&#x27;</span>)</span><br><span class="line">市北老数据字典 = 拿昨天的老数据(<span class="string">&#x27;市北&#x27;</span>)</span><br><span class="line">李沧老数据字典 = 拿昨天的老数据(<span class="string">&#x27;李沧&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> 增加数据(<span class="params">区域,新数据字典,老数据字典</span>):</span></span><br><span class="line">    文本.append(区域)</span><br><span class="line">    文本.append(<span class="string">&#x27;能查到日期的户数：&#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;能查到日期的户数&#x27;</span>])+<span class="string">&#x27;户  &#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;能查到日期的户数&#x27;</span>]-老数据字典[<span class="string">&#x27;能查到日期的户数&#x27;</span>]))</span><br><span class="line">    文本.append(<span class="string">&#x27;查不到日期的户数：&#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;查不到日期的户数&#x27;</span>])+<span class="string">&#x27;户  &#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;查不到日期的户数&#x27;</span>]-老数据字典[<span class="string">&#x27;查不到日期的户数&#x27;</span>]))</span><br><span class="line">    文本.append(<span class="string">&#x27;到期日为当月的户数：&#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;到期日为当月的户数&#x27;</span>])+<span class="string">&#x27;户  &#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;到期日为当月的户数&#x27;</span>]-老数据字典[<span class="string">&#x27;到期日为当月的户数&#x27;</span>]))</span><br><span class="line">    文本.append(<span class="string">&#x27;到期日为下月的户数：&#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;到期日为下月的户数&#x27;</span>])+<span class="string">&#x27;户  &#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;到期日为下月的户数&#x27;</span>]-老数据字典[<span class="string">&#x27;到期日为下月的户数&#x27;</span>]))</span><br><span class="line">    文本.append(<span class="string">&#x27;今年已逾期的户数：&#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;今年已逾期的户数&#x27;</span>])+<span class="string">&#x27;户  &#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;今年已逾期的户数&#x27;</span>]-老数据字典[<span class="string">&#x27;今年已逾期的户数&#x27;</span>]))</span><br><span class="line">    文本.append(<span class="string">&#x27;今年还未到期的户数：&#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;今年还未到期的户数&#x27;</span>])+<span class="string">&#x27;户  &#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;今年还未到期的户数&#x27;</span>]-老数据字典[<span class="string">&#x27;今年还未到期的户数&#x27;</span>]))</span><br><span class="line">    文本.append(<span class="string">&#x27;往年到期户：&#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;往年到期户&#x27;</span>])+<span class="string">&#x27;户  &#x27;</span>+<span class="built_in">str</span>(新数据字典[<span class="string">&#x27;往年到期户&#x27;</span>]-老数据字典[<span class="string">&#x27;往年到期户&#x27;</span>]))</span><br><span class="line">    <span class="comment"># 文本.append(&#x27;往年到期户茫茫多&#x27;)</span></span><br><span class="line">增加数据(<span class="string">&#x27;崂山&#x27;</span>,崂山新数据字典,崂山老数据字典)</span><br><span class="line">增加数据(<span class="string">&#x27;市南&#x27;</span>,市南新数据字典,市南老数据字典)</span><br><span class="line">增加数据(<span class="string">&#x27;市北&#x27;</span>,市北新数据字典,市北老数据字典)</span><br><span class="line">增加数据(<span class="string">&#x27;李沧&#x27;</span>,李沧新数据字典,李沧老数据字典)</span><br><span class="line"></span><br><span class="line">c = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 文本:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">    c += (<span class="string">&#x27;\n&#x27;</span>+i)</span><br><span class="line"><span class="built_in">print</span>(c)</span><br><span class="line">发送邮件(<span class="string">&#x27;更新通知&#x27;</span>,<span class="string">&#x27;崂山&#x27;</span>,c,<span class="string">&#x27;**&#x27;</span>,<span class="string">&#x27;**&#x27;</span>,[<span class="string">&#x27;**&#x27;</span>,<span class="string">&#x27;**&#x27;</span>],<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="删除数据的脚本"><a href="#删除数据的脚本" class="headerlink" title="删除数据的脚本"></a>删除数据的脚本</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> os,sys,django</span><br><span class="line"><span class="keyword">import</span> xlrd</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> 打开<span class="title">excel</span>文件():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,文件名,第几个表</span>):</span></span><br><span class="line">        self.文件 = xlrd.open_workbook(filename = 文件名)</span><br><span class="line">        self.表 = self.文件.sheet_by_index(第几个表-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 获得横向资料(<span class="params">self</span>):</span></span><br><span class="line">        self.数据 = [self.表.row_values(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(self.表.nrows)]</span><br><span class="line">        <span class="keyword">return</span> self.数据</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 获得纵向资料(<span class="params">self</span>):</span></span><br><span class="line">        self.数据 =  [self.表.col_values(i) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(self.表.ncols)]</span><br><span class="line">        <span class="keyword">return</span> self.数据</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 获得名称列数据(<span class="params">self,名称</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> 获得列序号(<span class="params">表名,查找字段名</span>):</span></span><br><span class="line">            列序号 = <span class="literal">None</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(表名.ncols):</span><br><span class="line">                <span class="keyword">if</span> (表名.cell_value(<span class="number">0</span>,i) == 查找字段名):</span><br><span class="line">                    列序号 = i</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">return</span> 列序号</span><br><span class="line">        <span class="built_in">print</span>(获得列序号(self.表,名称))</span><br><span class="line">        self.数据 = self.表.col_values(获得列序号(self.表,名称),<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> self.数据</span><br><span class="line">文件 = 打开excel文件(<span class="string">&#x27;市南可收费注销.xls&#x27;</span>,<span class="number">1</span>)</span><br><span class="line">list1 = 文件.获得名称列数据(<span class="string">&#x27;单位名称&#x27;</span>)</span><br><span class="line"></span><br><span class="line">project_path = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line">sys.path.append(project_path)</span><br><span class="line">os.environ[<span class="string">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>] = <span class="string">&#x27;shuai4.settings&#x27;</span></span><br><span class="line">django.setup()</span><br><span class="line"><span class="keyword">from</span> cuifei.models <span class="keyword">import</span> 催费表类</span><br><span class="line"></span><br><span class="line">催费表类.objects.<span class="built_in">filter</span>(公司名称__<span class="keyword">in</span>=list1).delete()</span><br></pre></td></tr></table></figure><h3 id="填充数据的脚本"><a href="#填充数据的脚本" class="headerlink" title="填充数据的脚本"></a>填充数据的脚本</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> os,sys,django</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> 提取类():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,文件名,第几个表</span>):</span></span><br><span class="line">        self.文件 = pd.read_excel(文件名, 第几个表)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 拿取数据(<span class="params">self,从第几行开始,*列名</span>):</span></span><br><span class="line">        self.数据 = self.文件.loc[从第几行开始-<span class="number">2</span>:,[*列名,]]</span><br><span class="line">        <span class="comment">#print(self.数据)</span></span><br><span class="line">        <span class="keyword">return</span> self.数据</span><br><span class="line"></span><br><span class="line">销售表 = 提取类(<span class="string">&#x27;不可收名单.xls&#x27;</span>,<span class="number">0</span>)</span><br><span class="line">销售数据 = 销售表.拿取数据(<span class="number">2</span>,<span class="string">&#x27;纳税人识别号&#x27;</span>,<span class="string">&#x27;纳税人名称&#x27;</span>)</span><br><span class="line">销售数据 = 销售数据.values.tolist()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">project_path = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line">sys.path.append(project_path)</span><br><span class="line">os.environ[<span class="string">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>] = <span class="string">&#x27;shuai4.settings&#x27;</span></span><br><span class="line">django.setup()</span><br><span class="line"><span class="keyword">from</span> cuifei.models <span class="keyword">import</span> 催费表<span class="number">22</span>年类</span><br><span class="line"><span class="comment"># 催费表22年类.objects.all().update(是否可收=&#x27;可收&#x27;)</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 销售数据:</span><br><span class="line">    <span class="keyword">if</span> 催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(税号=i[<span class="number">0</span>]):</span><br><span class="line">        催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(税号=i[<span class="number">0</span>]).update(是否可收=<span class="string">&#x27;不可收&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(i[<span class="number">1</span>]+<span class="string">&#x27;,通过税号确定不可收&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> 催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(公司名称=i[<span class="number">1</span>]):</span><br><span class="line">            催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(公司名称=i[<span class="number">1</span>]).update(是否可收=<span class="string">&#x27;不可收&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(i[<span class="number">1</span>]+<span class="string">&#x27;通过名称确定不可收&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(i[<span class="number">1</span>]+<span class="string">&#x27;发行表没有的不可收企业&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="批量导入数据脚本"><a href="#批量导入数据脚本" class="headerlink" title="批量导入数据脚本"></a>批量导入数据脚本</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> os,sys,django</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> 提取类():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,文件名,第几个表</span>):</span></span><br><span class="line">        self.文件 = pd.read_excel(文件名, 第几个表)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 拿取数据(<span class="params">self,从第几行开始,*列名</span>):</span></span><br><span class="line">        self.数据 = self.文件.loc[从第几行开始-<span class="number">2</span>:,[*列名,]]</span><br><span class="line">        <span class="comment">#print(self.数据)</span></span><br><span class="line">        <span class="keyword">return</span> self.数据</span><br><span class="line"></span><br><span class="line">销售表 = 提取类(<span class="string">&#x27;导入模板.xlsx&#x27;</span>,<span class="number">0</span>)</span><br><span class="line">销售数据 = 销售表.拿取数据(<span class="number">2</span>,<span class="string">&#x27;公司名称&#x27;</span>,<span class="string">&#x27;区域&#x27;</span>,<span class="string">&#x27;税号&#x27;</span>,<span class="string">&#x27;性质&#x27;</span>)</span><br><span class="line">销售数据 = 销售数据.values.tolist()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">project_path = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line">sys.path.append(project_path)</span><br><span class="line">os.environ[<span class="string">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>] = <span class="string">&#x27;shuai4.settings&#x27;</span></span><br><span class="line">django.setup()</span><br><span class="line"><span class="keyword">from</span> cuifei.models <span class="keyword">import</span> 催费表类</span><br><span class="line"></span><br><span class="line"><span class="built_in">list</span> = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 销售数据:</span><br><span class="line">    <span class="comment"># print(i[4])</span></span><br><span class="line">    <span class="built_in">list</span>.append(催费表类(公司名称 = i[<span class="number">0</span>],区域 = i[<span class="number">1</span>],税号 = i[<span class="number">2</span>],性质 = i[<span class="number">3</span>]))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">催费表类.objects.bulk_create(<span class="built_in">list</span>)</span><br></pre></td></tr></table></figure><h3 id="更新某一列数据脚本"><a href="#更新某一列数据脚本" class="headerlink" title="更新某一列数据脚本"></a>更新某一列数据脚本</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> os,sys,django</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> 提取类():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self,文件名,第几个表</span>):</span></span><br><span class="line">        self.文件 = pd.read_excel(文件名, 第几个表)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> 拿取数据(<span class="params">self,从第几行开始,*列名</span>):</span></span><br><span class="line">        self.数据 = self.文件.loc[从第几行开始-<span class="number">2</span>:,[*列名,]]</span><br><span class="line">        <span class="comment">#print(self.数据)</span></span><br><span class="line">        <span class="keyword">return</span> self.数据</span><br><span class="line"></span><br><span class="line">销售表 = 提取类(<span class="string">&#x27;/www/wwwroot/shuai4-django-env3.7/shuai4-django/时间.xls&#x27;</span>,<span class="number">0</span>)</span><br><span class="line">销售数据 = 销售表.拿取数据(<span class="number">2</span>,<span class="string">&#x27;税号&#x27;</span>,<span class="string">&#x27;名称&#x27;</span>,<span class="string">&#x27;服务期限&#x27;</span>)</span><br><span class="line">销售数据 = 销售数据.values.tolist()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">project_path = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</span><br><span class="line">sys.path.append(project_path)</span><br><span class="line">os.environ[<span class="string">&#x27;DJANGO_SETTINGS_MODULE&#x27;</span>] = <span class="string">&#x27;shuai4.settings&#x27;</span></span><br><span class="line">django.setup()</span><br><span class="line"><span class="keyword">from</span> cuifei.models <span class="keyword">import</span> 催费表<span class="number">22</span>年类</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> 销售数据:</span><br><span class="line">    <span class="keyword">if</span> 催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(税号=i[<span class="number">0</span>]):</span><br><span class="line">        催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(税号=i[<span class="number">0</span>]).update(到期日=i[<span class="number">2</span>])</span><br><span class="line">        <span class="built_in">print</span>(i[<span class="number">0</span>]+<span class="string">&#x27;成功&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> 催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(公司名称=i[<span class="number">1</span>]):</span><br><span class="line">            催费表<span class="number">22</span>年类.objects.<span class="built_in">filter</span>(公司名称=i[<span class="number">1</span>]).update(到期日=i[<span class="number">2</span>])</span><br><span class="line">            <span class="built_in">print</span>(i[<span class="number">0</span>]+<span class="string">&#x27;成功&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(i[<span class="number">0</span>]+<span class="string">&#x27;失败&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;把操作django数据库的导入更新操作汇总一下以备参考&lt;/p&gt;</summary>
    
    
    
    <category term="计算机" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
    <category term="python" scheme="https://zhongkangjk.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/python/"/>
    
    
    <category term="python" scheme="https://zhongkangjk.github.io/tags/python/"/>
    
    <category term="django" scheme="https://zhongkangjk.github.io/tags/django/"/>
    
  </entry>
  
</feed>
